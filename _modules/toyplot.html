

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>toyplot &mdash; Toyplot 0.1.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/toyplot.css" type="text/css" />
  

  
    <link rel="top" title="Toyplot 0.1.0 documentation" href="../index.html"/>
        <link rel="up" title="Module code" href="index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="fa fa-home"> Toyplot</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installing Toyplot</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#using-your-os-package-manager">Using Your OS Package Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#using-pip-easy-install">Using Pip / Easy Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#from-source">From Source</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">The Toyplot Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorial.html#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial.html#styles">Styles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial.html#plotting">Plotting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial.html#palettes">Palettes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial.html#filled-regions">Filled Regions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial.html#barplots">Barplots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial.html#scatterplots">Scatterplots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial.html#markers">Markers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial.html#rendering">Rendering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial.html#axes">Axes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial.html#animation">Animation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../hacking.html">Toyplot for Hackers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../hacking.html#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hacking.html#code-walkthrough">Code Walkthrough</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hacking.html#running-regression-tests">Running Regression Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hacking.html#modifying-regression-tests">Modifying Regression Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hacking.html#test-coverage">Test Coverage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hacking.html#building-the-documentation">Building the Documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">The Toyplot Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../toyplot.html">toyplot module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../toyplot.color.html">toyplot.color module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../toyplot.color.css.html">toyplot.color.css module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backends.html">Toyplot Backends</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Toyplot</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Module code</a> &raquo;</li>
      
    <li>toyplot</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <h1>Source code for toyplot</h1><div class="highlight"><pre>
<span class="c"># Copyright 2014, Sandia Corporation. Under the terms of Contract</span>
<span class="c"># DE-AC04-94AL85000 with Sandia Corporation, the U.S. Government retains certain</span>
<span class="c"># rights in this software.</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span>

<span class="kn">import</span> <span class="nn">collections</span>
<span class="kn">import</span> <span class="nn">itertools</span>
<span class="kn">import</span> <span class="nn">numbers</span>
<span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">import</span> <span class="nn">toyplot.color.css</span>

<span class="c">###############################################################################################</span>
<span class="c"># Helpers</span>

<span class="k">def</span> <span class="nf">_null_min</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
  <span class="k">if</span> <span class="n">a</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">b</span>
  <span class="k">if</span> <span class="n">b</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">a</span>
  <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_null_max</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
  <span class="k">if</span> <span class="n">a</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">b</span>
  <span class="k">if</span> <span class="n">b</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">a</span>
  <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_get_scale</span><span class="p">(</span><span class="n">scale</span><span class="p">):</span>
  <span class="k">if</span> <span class="n">scale</span> <span class="o">==</span> <span class="s">&quot;linear&quot;</span><span class="p">:</span>
    <span class="k">return</span> <span class="p">(</span><span class="s">&quot;linear&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">scale</span> <span class="o">==</span> <span class="s">&quot;log&quot;</span> <span class="ow">or</span> <span class="n">scale</span> <span class="o">==</span> <span class="s">&quot;log10&quot;</span><span class="p">:</span>
    <span class="k">return</span> <span class="p">(</span><span class="s">&quot;log&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">scale</span> <span class="o">==</span> <span class="s">&quot;log2&quot;</span><span class="p">:</span>
    <span class="k">return</span> <span class="p">(</span><span class="s">&quot;log&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_signed_log</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">base</span><span class="p">):</span>
  <span class="k">return</span> <span class="n">numpy</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="n">numpy</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="o">/</span> <span class="n">numpy</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">base</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_symmetric_log</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
  <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
    <span class="n">masked</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">masked_inside</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="n">threshold</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">masked</span><span class="o">.</span><span class="n">mask</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">threshold</span> <span class="o">+</span> <span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">masked</span><span class="p">))</span> <span class="o">/</span> <span class="n">numpy</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">base</span><span class="p">))))</span>
  <span class="k">if</span> <span class="n">numpy</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">threshold</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">x</span>
  <span class="k">return</span> <span class="n">numpy</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">threshold</span> <span class="o">+</span> <span class="n">numpy</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span>

<span class="k">def</span> <span class="nf">_require_scalar</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
  <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Number</span><span class="p">):</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Expected a number, received </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="n">value</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">value</span>

<span class="k">def</span> <span class="nf">_require_scalar_vector</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
  <span class="n">array</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s">&quot;float64&quot;</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">array</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">():</span>
    <span class="n">array</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">length</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">length</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">length</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">array</span><span class="p">)</span> <span class="o">!=</span> <span class="n">length</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Expected </span><span class="si">%s</span><span class="s"> values, received </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">length</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">array</span><span class="p">)))</span>
  <span class="k">return</span> <span class="n">array</span>

<span class="k">def</span> <span class="nf">_require_scalar_matrix</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
  <span class="n">array</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s">&quot;float64&quot;</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">array</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Expected a matrix.&quot;</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">rows</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">rows</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Expected </span><span class="si">%s</span><span class="s"> rows, received </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
  <span class="k">if</span> <span class="n">columns</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="n">columns</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Expected </span><span class="si">%s</span><span class="s"> columns, received </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="n">array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
  <span class="k">return</span> <span class="n">array</span>

<span class="k">def</span> <span class="nf">_require_string</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
  <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Expected a string, received </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="n">value</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">value</span>

<span class="k">def</span> <span class="nf">_require_optional_string</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
  <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">basestring</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">None</span><span class="p">))):</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Expected a string value or None, received </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="n">value</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">value</span>

<span class="k">def</span> <span class="nf">_require_string_array</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
  <span class="n">array</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s">&quot;string&quot;</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">array</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">():</span>
    <span class="n">array</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">length</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">length</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">length</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">array</span><span class="p">)</span> <span class="o">!=</span> <span class="n">length</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Expected </span><span class="si">%s</span><span class="s"> values, received </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">length</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">array</span><span class="p">)))</span>
  <span class="k">return</span> <span class="n">array</span>

<span class="k">def</span> <span class="nf">_require_marker_array</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
  <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">basestring</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
    <span class="n">array</span> <span class="o">=</span> <span class="p">[</span><span class="n">value</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="k">if</span> <span class="n">length</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">length</span><span class="p">)</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">array</span> <span class="o">=</span> <span class="n">value</span>
  <span class="k">if</span> <span class="n">length</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">array</span><span class="p">)</span> <span class="o">!=</span> <span class="n">length</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Expected </span><span class="si">%s</span><span class="s"> values, received </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">length</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">array</span><span class="p">)))</span>
  <span class="k">return</span> <span class="n">array</span>

<span class="k">def</span> <span class="nf">_require_style</span><span class="p">(</span><span class="n">style</span><span class="p">):</span>
  <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">style</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Expected a dictionary of CSS styles, received </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="n">style</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">style</span>

<span class="k">def</span> <span class="nf">_require_optional_id</span><span class="p">(</span><span class="nb">id</span><span class="p">):</span>
  <span class="k">return</span> <span class="n">_require_optional_string</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_broadcast_scalar</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">shape</span><span class="p">):</span>
  <span class="n">array</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s">&quot;float64&quot;</span><span class="p">)</span>
  <span class="n">array</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">broadcast_arrays</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">shape</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
  <span class="k">return</span> <span class="n">array</span>

<span class="k">def</span> <span class="nf">_broadcast_object</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">shape</span><span class="p">):</span>
  <span class="n">array</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
  <span class="n">array</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">broadcast_arrays</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">shape</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
  <span class="k">return</span> <span class="n">array</span>

<span class="k">def</span> <span class="nf">_region</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">rect</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">corner</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">gutter</span><span class="o">=</span><span class="mi">40</span><span class="p">):</span>
  <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="nb">min</span><span class="p">,</span> <span class="nb">max</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Number</span><span class="p">):</span>
      <span class="k">return</span> <span class="n">value</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span>
      <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
      <span class="k">if</span> <span class="n">value</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s">&quot;%&quot;</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">*</span> <span class="mf">0.01</span>
        <span class="k">return</span> <span class="p">((</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">value</span><span class="p">)</span> <span class="o">*</span> <span class="nb">min</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">value</span> <span class="o">*</span> <span class="nb">max</span><span class="p">)</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

  <span class="c"># Specify explicit bounds for the region</span>
  <span class="k">if</span> <span class="n">bounds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bounds</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">(</span><span class="n">length</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">length</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">length</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span> <span class="n">length</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]))</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Unrecognized bounds type&quot;</span><span class="p">)</span>
  <span class="c"># Specify an explicit rectangle for the region</span>
  <span class="k">if</span> <span class="n">rect</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rect</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">rect</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">rect</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
      <span class="n">width</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">rect</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
      <span class="n">height</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">rect</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
      <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">width</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">height</span><span class="p">)</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Unrecognized rect type&quot;</span><span class="p">)</span>
  <span class="c"># Offset a rectangle from a corner</span>
  <span class="k">if</span> <span class="n">corner</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">corner</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">corner</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
      <span class="n">position</span> <span class="o">=</span> <span class="n">corner</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
      <span class="n">width</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">corner</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
      <span class="n">height</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">corner</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
      <span class="n">inset</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">corner</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Unrecognized corner type&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">position</span> <span class="o">==</span> <span class="s">&quot;top&quot;</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">((</span><span class="n">xmin</span> <span class="o">+</span> <span class="n">xmax</span> <span class="o">-</span> <span class="n">width</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="n">xmin</span> <span class="o">+</span> <span class="n">xmax</span> <span class="o">+</span> <span class="n">width</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">ymin</span> <span class="o">+</span> <span class="n">inset</span><span class="p">,</span> <span class="n">ymin</span> <span class="o">+</span> <span class="n">inset</span> <span class="o">+</span> <span class="n">height</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">position</span> <span class="o">==</span> <span class="s">&quot;top-right&quot;</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">(</span><span class="n">xmax</span> <span class="o">-</span> <span class="n">width</span> <span class="o">-</span> <span class="n">inset</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">-</span> <span class="n">inset</span><span class="p">,</span> <span class="n">ymin</span> <span class="o">+</span> <span class="n">inset</span><span class="p">,</span> <span class="n">ymin</span> <span class="o">+</span> <span class="n">inset</span> <span class="o">+</span> <span class="n">height</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">position</span> <span class="o">==</span> <span class="s">&quot;right&quot;</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">(</span><span class="n">xmax</span> <span class="o">-</span> <span class="n">width</span> <span class="o">-</span> <span class="n">inset</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">-</span> <span class="n">inset</span><span class="p">,</span> <span class="p">(</span><span class="n">ymin</span> <span class="o">+</span> <span class="n">ymax</span> <span class="o">-</span> <span class="n">height</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="n">ymin</span> <span class="o">+</span> <span class="n">ymax</span> <span class="o">+</span> <span class="n">height</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">position</span> <span class="o">==</span> <span class="s">&quot;bottom-right&quot;</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">(</span><span class="n">xmax</span> <span class="o">-</span> <span class="n">width</span> <span class="o">-</span> <span class="n">inset</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">-</span> <span class="n">inset</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">-</span> <span class="n">inset</span> <span class="o">-</span> <span class="n">height</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">-</span> <span class="n">inset</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">position</span> <span class="o">==</span> <span class="s">&quot;bottom&quot;</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">((</span><span class="n">xmin</span> <span class="o">+</span> <span class="n">xmax</span> <span class="o">-</span> <span class="n">width</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="n">xmin</span> <span class="o">+</span> <span class="n">xmax</span> <span class="o">+</span> <span class="n">width</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">-</span> <span class="n">inset</span> <span class="o">-</span> <span class="n">height</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">-</span> <span class="n">inset</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">position</span> <span class="o">==</span> <span class="s">&quot;bottom-left&quot;</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">(</span><span class="n">xmin</span> <span class="o">+</span> <span class="n">inset</span><span class="p">,</span> <span class="n">xmin</span> <span class="o">+</span> <span class="n">inset</span> <span class="o">+</span> <span class="n">width</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">-</span> <span class="n">inset</span> <span class="o">-</span> <span class="n">height</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">-</span> <span class="n">inset</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">position</span> <span class="o">==</span> <span class="s">&quot;left&quot;</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">(</span><span class="n">xmin</span> <span class="o">+</span> <span class="n">inset</span><span class="p">,</span> <span class="n">xmin</span> <span class="o">+</span> <span class="n">inset</span> <span class="o">+</span> <span class="n">width</span><span class="p">,</span> <span class="p">(</span><span class="n">ymin</span> <span class="o">+</span> <span class="n">ymax</span> <span class="o">-</span> <span class="n">height</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="n">ymin</span> <span class="o">+</span> <span class="n">ymax</span> <span class="o">+</span> <span class="n">height</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">position</span> <span class="o">==</span> <span class="s">&quot;top-left&quot;</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">(</span><span class="n">xmin</span> <span class="o">+</span> <span class="n">inset</span><span class="p">,</span> <span class="n">xmin</span> <span class="o">+</span> <span class="n">inset</span> <span class="o">+</span> <span class="n">width</span><span class="p">,</span> <span class="n">ymin</span> <span class="o">+</span> <span class="n">inset</span><span class="p">,</span> <span class="n">ymin</span> <span class="o">+</span> <span class="n">inset</span> <span class="o">+</span> <span class="n">height</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Unrecognized corner&quot;</span><span class="p">)</span>
  <span class="c"># Choose a cell from an MxN grid, with optional column/row spanning.</span>
  <span class="k">if</span> <span class="n">grid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">grid</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span> <span class="c"># Cell n (in left-to-right, top-to-bottom order) of an M x N grid</span>
      <span class="n">M</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="n">grid</span>
      <span class="n">i</span> <span class="o">=</span> <span class="n">n</span> <span class="o">//</span> <span class="n">N</span>
      <span class="n">j</span> <span class="o">=</span> <span class="n">n</span> <span class="o">%</span> <span class="n">N</span>
      <span class="n">rowspan</span><span class="p">,</span> <span class="n">colspan</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">grid</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span> <span class="c"># Cell i,j of an M x N grid</span>
      <span class="n">M</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">=</span> <span class="n">grid</span>
      <span class="n">rowspan</span><span class="p">,</span> <span class="n">colspan</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">grid</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span> <span class="c"># Cells [i, i+rowspan), [j, j+colspan) of an M x N grid</span>
      <span class="n">M</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">rowspan</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">colspan</span> <span class="o">=</span> <span class="n">grid</span>

    <span class="n">cell_width</span> <span class="o">=</span> <span class="p">(</span><span class="n">xmax</span> <span class="o">-</span> <span class="n">xmin</span><span class="p">)</span> <span class="o">/</span> <span class="n">N</span>
    <span class="n">cell_height</span> <span class="o">=</span> <span class="p">(</span><span class="n">ymax</span> <span class="o">-</span> <span class="n">ymin</span><span class="p">)</span> <span class="o">/</span> <span class="n">M</span>

    <span class="k">return</span> <span class="p">(</span>
      <span class="p">(</span><span class="n">j</span> <span class="o">*</span> <span class="n">cell_width</span><span class="p">)</span> <span class="o">+</span> <span class="n">gutter</span><span class="p">,</span>
      <span class="p">((</span><span class="n">j</span> <span class="o">+</span> <span class="n">colspan</span><span class="p">)</span> <span class="o">*</span> <span class="n">cell_width</span><span class="p">)</span> <span class="o">-</span> <span class="n">gutter</span><span class="p">,</span>
      <span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">cell_height</span><span class="p">)</span> <span class="o">+</span> <span class="n">gutter</span><span class="p">,</span>
      <span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="n">rowspan</span><span class="p">)</span> <span class="o">*</span> <span class="n">cell_height</span><span class="p">)</span> <span class="o">-</span> <span class="n">gutter</span><span class="p">,</span>
      <span class="p">)</span>
  <span class="c"># If nothing else fits, consume the entire region</span>
  <span class="k">return</span> <span class="p">(</span><span class="n">xmin</span> <span class="o">+</span> <span class="n">gutter</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">-</span> <span class="n">gutter</span><span class="p">,</span> <span class="n">ymin</span> <span class="o">+</span> <span class="n">gutter</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">-</span> <span class="n">gutter</span><span class="p">)</span>

<span class="c">###############################################################################################</span>
<span class="c"># Basic Toyplot marks </span>

<div class="viewcode-block" id="Mark"><a class="viewcode-back" href="../toyplot.html#toyplot.Mark">[docs]</a><span class="k">class</span> <span class="nc">Mark</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">styles</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_style</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">style</span> <span class="ow">in</span> <span class="n">styles</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HLinesMark"><a class="viewcode-back" href="../toyplot.html#toyplot.HLinesMark">[docs]</a><span class="k">class</span> <span class="nc">HLinesMark</span><span class="p">(</span><span class="n">Mark</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Render a horizontal line.</span>

<span class="sd">  Do not create HLinesMark instances directly.  Use factory methods such as</span>
<span class="sd">  :meth:`toyplot.Axes2D.hlines` instead.</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="n">Mark</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_title</span> <span class="o">=</span> <span class="n">title</span>
</div>
<div class="viewcode-block" id="LegendMark"><a class="viewcode-back" href="../toyplot.html#toyplot.LegendMark">[docs]</a><span class="k">class</span> <span class="nc">LegendMark</span><span class="p">(</span><span class="n">Mark</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Render a figure legend (a collection of markers and labels).</span>

<span class="sd">  Do not create LegendMark instances directly.  Use factory methods such as</span>
<span class="sd">  :meth:`toyplot.Canvas.legend` or :meth:`toyplot.Axes2D.legend` instead.</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">marks</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="n">label_style</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="n">Mark</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">{</span><span class="s">&quot;fill&quot;</span><span class="p">:</span><span class="s">&quot;none&quot;</span><span class="p">,</span> <span class="s">&quot;stroke&quot;</span><span class="p">:</span><span class="s">&quot;none&quot;</span><span class="p">},</span> <span class="n">style</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_xmin</span> <span class="o">=</span> <span class="n">xmin</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_xmax</span> <span class="o">=</span> <span class="n">xmax</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ymin</span> <span class="o">=</span> <span class="n">ymin</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ymax</span> <span class="o">=</span> <span class="n">ymax</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_gutter</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_marks</span> <span class="o">=</span> <span class="n">marks</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_label_style</span> <span class="o">=</span> <span class="n">label_style</span>
</div>
<div class="viewcode-block" id="RectMark"><a class="viewcode-back" href="../toyplot.html#toyplot.RectMark">[docs]</a><span class="k">class</span> <span class="nc">RectMark</span><span class="p">(</span><span class="n">Mark</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Render an axis-aligned rectangle.</span>

<span class="sd">  Do not create RectMark instances directly.  Use factory methods such as</span>
<span class="sd">  :meth:`toyplot.Canvas.rect` instead.</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="n">Mark</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_x1</span> <span class="o">=</span> <span class="n">x1</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_x2</span> <span class="o">=</span> <span class="n">x2</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_y1</span> <span class="o">=</span> <span class="n">y1</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_y2</span> <span class="o">=</span> <span class="n">y2</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_title</span> <span class="o">=</span> <span class="n">title</span>
</div>
<div class="viewcode-block" id="TextMark"><a class="viewcode-back" href="../toyplot.html#toyplot.TextMark">[docs]</a><span class="k">class</span> <span class="nc">TextMark</span><span class="p">(</span><span class="n">Mark</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Render text.</span>

<span class="sd">  Do not create TextMark instances directly.  Use factory methods such as</span>
<span class="sd">  :meth:`toyplot.Canvas.text` or :meth:`toyplot.Axes2D.text` instead.</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="n">Mark</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">{</span><span class="s">&quot;font-weight&quot;</span><span class="p">:</span><span class="s">&quot;normal&quot;</span><span class="p">,</span> <span class="s">&quot;stroke&quot;</span><span class="p">:</span><span class="s">&quot;none&quot;</span><span class="p">},</span> <span class="n">style</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_text</span> <span class="o">=</span> <span class="n">text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_title</span> <span class="o">=</span> <span class="n">title</span>
</div>
<div class="viewcode-block" id="VColorBarMark"><a class="viewcode-back" href="../toyplot.html#toyplot.VColorBarMark">[docs]</a><span class="k">class</span> <span class="nc">VColorBarMark</span><span class="p">(</span><span class="n">Mark</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Displays a one-dimensional mapping from values to colors.</span>

<span class="sd">  Do not create VColorbarMark instances directly.  Use factory methods such</span>
<span class="sd">  as :meth:`toyplot.Axes2D.colorbar` instead.</span>
<span class="sd">  &quot;&quot;&quot;</span>
<div class="viewcode-block" id="VColorBarMark.DomainHelper"><a class="viewcode-back" href="../toyplot.html#toyplot.VColorBarMark.DomainHelper">[docs]</a>  <span class="k">class</span> <span class="nc">DomainHelper</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">min</span><span class="p">,</span> <span class="nb">max</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_min</span> <span class="o">=</span> <span class="nb">min</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_max</span> <span class="o">=</span> <span class="nb">max</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
      <span class="k">if</span> <span class="nb">min</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_min</span> <span class="o">=</span> <span class="nb">min</span>
      <span class="k">if</span> <span class="nb">max</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max</span> <span class="o">=</span> <span class="nb">max</span>
</div>
<div class="viewcode-block" id="VColorBarMark.LabelHelper"><a class="viewcode-back" href="../toyplot.html#toyplot.VColorBarMark.LabelHelper">[docs]</a>  <span class="k">class</span> <span class="nc">LabelHelper</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{}):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_text</span> <span class="o">=</span> <span class="n">label</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_style</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;font-size&quot;</span><span class="p">:</span><span class="s">&quot;12px&quot;</span><span class="p">,</span> <span class="s">&quot;font-weight&quot;</span><span class="p">:</span><span class="s">&quot;bold&quot;</span><span class="p">,</span> <span class="s">&quot;stroke&quot;</span><span class="p">:</span><span class="s">&quot;none&quot;</span><span class="p">,</span> <span class="s">&quot;text-anchor&quot;</span><span class="p">:</span><span class="s">&quot;middle&quot;</span><span class="p">,</span> <span class="s">&quot;alignment-baseline&quot;</span><span class="p">:</span><span class="s">&quot;middle&quot;</span><span class="p">,</span> <span class="s">&quot;baseline-shift&quot;</span><span class="p">:</span><span class="s">&quot;-200%&quot;</span><span class="p">}</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
      <span class="k">if</span> <span class="n">text</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_text</span> <span class="o">=</span> <span class="n">text</span>
      <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="VColorBarMark.PerTickHelper"><a class="viewcode-back" href="../toyplot.html#toyplot.VColorBarMark.PerTickHelper">[docs]</a>  <span class="k">class</span> <span class="nc">PerTickHelper</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">defaultdict</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_values</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">defaultdict</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
      <span class="k">if</span> <span class="n">index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">tick</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
      <span class="k">elif</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">tick</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_values</span><span class="p">[</span><span class="n">value</span><span class="p">]</span>
      <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">new_style</span> <span class="o">=</span> <span class="n">tick</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;style&quot;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">new_style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
        <span class="n">tick</span><span class="p">[</span><span class="s">&quot;style&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_style</span>
<div class="viewcode-block" id="VColorBarMark.PerTickHelper.styles"><a class="viewcode-back" href="../toyplot.html#toyplot.VColorBarMark.PerTickHelper.styles">[docs]</a>    <span class="k">def</span> <span class="nf">styles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
      <span class="n">results</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;style&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="k">if</span> <span class="n">index</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span> <span class="k">else</span> <span class="bp">None</span> <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">))]</span>
      <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_values</span><span class="p">:</span>
        <span class="n">deltas</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">values</span> <span class="o">-</span> <span class="n">value</span><span class="p">)</span>
        <span class="n">results</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">argmin</span><span class="p">(</span><span class="n">deltas</span><span class="p">)]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_values</span><span class="p">[</span><span class="n">value</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;style&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
      <span class="k">return</span> <span class="n">results</span>
</div></div>
<div class="viewcode-block" id="VColorBarMark.TicksHelper"><a class="viewcode-back" href="../toyplot.html#toyplot.VColorBarMark.TicksHelper">[docs]</a>  <span class="k">class</span> <span class="nc">TicksHelper</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">locator</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_locator</span> <span class="o">=</span> <span class="n">locator</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_show</span> <span class="o">=</span> <span class="bp">False</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_length</span> <span class="o">=</span> <span class="n">length</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_style</span> <span class="o">=</span> <span class="p">{}</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">labels</span> <span class="o">=</span> <span class="n">VColorBarMark</span><span class="o">.</span><span class="n">TickLabelsHelper</span><span class="p">()</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">tick</span> <span class="o">=</span> <span class="n">VColorBarMark</span><span class="o">.</span><span class="n">PerTickHelper</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">locator</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
      <span class="k">if</span> <span class="n">show</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_show</span> <span class="o">=</span> <span class="n">show</span>
      <span class="k">if</span> <span class="n">length</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_length</span> <span class="o">=</span> <span class="n">length</span>
      <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">locator</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_locator</span> <span class="o">=</span> <span class="n">locator</span>
</div>
<div class="viewcode-block" id="VColorBarMark.TickLabelsHelper"><a class="viewcode-back" href="../toyplot.html#toyplot.VColorBarMark.TickLabelsHelper">[docs]</a>  <span class="k">class</span> <span class="nc">TickLabelsHelper</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_show</span> <span class="o">=</span> <span class="bp">True</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_style</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;font-size&quot;</span><span class="p">:</span><span class="s">&quot;10px&quot;</span><span class="p">,</span> <span class="s">&quot;font-weight&quot;</span><span class="p">:</span><span class="s">&quot;normal&quot;</span><span class="p">,</span> <span class="s">&quot;stroke&quot;</span><span class="p">:</span><span class="s">&quot;none&quot;</span><span class="p">}</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">VColorBarMark</span><span class="o">.</span><span class="n">PerTickHelper</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
      <span class="k">if</span> <span class="n">show</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_show</span> <span class="o">=</span> <span class="n">show</span>
      <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
</div>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xmin_range</span><span class="p">,</span> <span class="n">xmax_range</span><span class="p">,</span> <span class="n">ymin_range</span><span class="p">,</span> <span class="n">ymax_range</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">palette</span><span class="p">,</span> <span class="n">padding</span><span class="p">,</span> <span class="n">tick_length</span><span class="p">,</span> <span class="nb">min</span><span class="p">,</span> <span class="nb">max</span><span class="p">,</span> <span class="n">tick_locator</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="n">Mark</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">style</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_xmin_range</span> <span class="o">=</span> <span class="n">xmin_range</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_xmax_range</span> <span class="o">=</span> <span class="n">xmax_range</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ymin_range</span> <span class="o">=</span> <span class="n">ymin_range</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ymax_range</span> <span class="o">=</span> <span class="n">ymax_range</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="s">&quot;linear&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_palette</span> <span class="o">=</span> <span class="n">palette</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vmin_implicit</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vmax_implicit</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_padding</span> <span class="o">=</span> <span class="n">padding</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">domain</span> <span class="o">=</span> <span class="n">VColorBarMark</span><span class="o">.</span><span class="n">DomainHelper</span><span class="p">(</span><span class="nb">min</span><span class="p">,</span> <span class="nb">max</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">VColorBarMark</span><span class="o">.</span><span class="n">LabelHelper</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ticks</span> <span class="o">=</span> <span class="n">VColorBarMark</span><span class="o">.</span><span class="n">TicksHelper</span><span class="p">(</span><span class="n">tick_length</span><span class="p">,</span> <span class="n">tick_locator</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="o">=</span> <span class="nb">id</span>

<span class="c">#  def __call__(self, show=None, scale=None):</span>
<span class="c">#    if scale is not None:</span>
<span class="c">#      self._scale = scale</span>

  <span class="k">def</span> <span class="nf">_update_domain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vmin_implicit</span> <span class="o">=</span> <span class="n">_null_min</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vmin_implicit</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vmax_implicit</span> <span class="o">=</span> <span class="n">_null_max</span><span class="p">(</span><span class="n">vmax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vmax_implicit</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">_finalize_domain</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c"># Begin with the implicit domain defined by any explicitly-specified data.</span>
    <span class="n">vmin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vmin_implicit</span>
    <span class="n">vmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vmax_implicit</span>

    <span class="c"># If there is no implicit domain (we don&#39;t have any data), default to the origin.</span>
    <span class="k">if</span> <span class="n">vmin</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">vmin</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="n">vmax</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">vmax</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c"># Allow users to override the domain.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">_min</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">vmin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">_min</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">_max</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">vmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">_max</span>

    <span class="c"># Ensure that the domain is never empty.</span>
    <span class="k">if</span> <span class="n">vmin</span> <span class="o">==</span> <span class="n">vmax</span><span class="p">:</span>
      <span class="n">vmin</span> <span class="o">-=</span> <span class="mf">0.5</span>
      <span class="n">vmax</span> <span class="o">+=</span> <span class="mf">0.5</span>

    <span class="k">def</span> <span class="nf">get_locator</span><span class="p">(</span><span class="n">locator</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span> <span class="n">domain_min</span><span class="p">,</span> <span class="n">domain_max</span><span class="p">):</span>
      <span class="k">if</span> <span class="n">locator</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">locator</span>
      <span class="k">if</span> <span class="n">scale</span> <span class="o">==</span> <span class="s">&quot;linear&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ExtendedTickLocator</span><span class="p">()</span>

    <span class="c"># Calculate tick locations and labels.</span>
    <span class="n">locator</span> <span class="o">=</span> <span class="n">get_locator</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ticks</span><span class="o">.</span><span class="n">_locator</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_tick_locations</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tick_labels</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tick_titles</span> <span class="o">=</span> <span class="n">locator</span><span class="o">.</span><span class="n">ticks</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">)</span>

    <span class="c"># Allow tick locations to grow (never shrink) the domain.</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_tick_locations</span><span class="p">):</span>
      <span class="n">vmin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tick_locations</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
      <span class="n">vmax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">vmax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tick_locations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_vmin_computed</span> <span class="o">=</span> <span class="n">vmin</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vmax_computed</span> <span class="o">=</span> <span class="n">vmax</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_map</span> <span class="o">=</span> <span class="n">toyplot</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">LinearMap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_palette</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="n">vmax</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">linear_projection</span><span class="p">(</span><span class="n">domain_min</span><span class="p">,</span> <span class="n">domain_max</span><span class="p">,</span> <span class="n">range_min</span><span class="p">,</span> <span class="n">range_max</span><span class="p">):</span>
      <span class="k">def</span> <span class="nf">implementation</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="p">((</span><span class="n">x</span> <span class="o">-</span> <span class="n">domain_min</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">domain_max</span> <span class="o">-</span> <span class="n">domain_min</span><span class="p">)))</span> <span class="o">*</span> <span class="p">(</span><span class="n">range_max</span> <span class="o">-</span> <span class="n">range_min</span><span class="p">)</span> <span class="o">+</span> <span class="n">range_min</span>
      <span class="k">return</span> <span class="n">implementation</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span> <span class="o">==</span> <span class="s">&quot;linear&quot;</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_projection</span> <span class="o">=</span> <span class="n">linear_projection</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ymin_range</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_padding</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ymax_range</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_padding</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">_project_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_projection</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">_project_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_map</span><span class="o">.</span><span class="n">colors</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="VLinesMark"><a class="viewcode-back" href="../toyplot.html#toyplot.VLinesMark">[docs]</a><span class="k">class</span> <span class="nc">VLinesMark</span><span class="p">(</span><span class="n">Mark</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Render a vertical line.</span>

<span class="sd">  Do not create VLinesMark instances directly.  Use factory methods such as</span>
<span class="sd">  :meth:`toyplot.Axes2D.vlines` instead.</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="n">Mark</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_title</span> <span class="o">=</span> <span class="n">title</span>
<span class="c">###############################################################################################</span>
<span class="c"># Higher-level marks</span>
</div>
<div class="viewcode-block" id="BarBoundariesMark"><a class="viewcode-back" href="../toyplot.html#toyplot.BarBoundariesMark">[docs]</a><span class="k">class</span> <span class="nc">BarBoundariesMark</span><span class="p">(</span><span class="n">Mark</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Render multiple stacked bars defined by bar boundaries.</span>

<span class="sd">  Do not create BarBoundariesMark instances directly.  Use factory methods such as</span>
<span class="sd">  :meth:`toyplot.Axes2D.bars` instead.</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">along</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">series</span><span class="p">,</span> <span class="n">fill</span><span class="p">,</span> <span class="n">opacity</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="n">Mark</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">{</span><span class="s">&quot;stroke&quot;</span><span class="p">:</span><span class="s">&quot;none&quot;</span><span class="p">},</span> <span class="n">style</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_along</span> <span class="o">=</span> <span class="n">along</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_position</span> <span class="o">=</span> <span class="n">position</span> <span class="c"># M coordinates</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_width</span> <span class="o">=</span> <span class="n">width</span>       <span class="c"># M bar widths</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_series</span> <span class="o">=</span> <span class="n">series</span>     <span class="c"># M x N bar boundaries</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_fill</span> <span class="o">=</span> <span class="n">fill</span>         <span class="c"># M x 4(N-1) fill colors</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_opacity</span> <span class="o">=</span> <span class="n">opacity</span>   <span class="c"># M x N-1 opacities</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_title</span> <span class="o">=</span> <span class="n">title</span>       <span class="c"># M x N-1 titles</span>
</div>
<div class="viewcode-block" id="BarMagnitudesMark"><a class="viewcode-back" href="../toyplot.html#toyplot.BarMagnitudesMark">[docs]</a><span class="k">class</span> <span class="nc">BarMagnitudesMark</span><span class="p">(</span><span class="n">Mark</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Render multiple stacked bars defined by bar magnitudes.</span>

<span class="sd">  Do not create BarMagnitudesMark instances directly.  Use factory methods such as</span>
<span class="sd">  :meth:`toyplot.Axes2D.bars` instead.</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">along</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">baseline</span><span class="p">,</span> <span class="n">series</span><span class="p">,</span> <span class="n">fill</span><span class="p">,</span> <span class="n">opacity</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="n">Mark</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">{</span><span class="s">&quot;stroke&quot;</span><span class="p">:</span><span class="s">&quot;none&quot;</span><span class="p">},</span> <span class="n">style</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_along</span> <span class="o">=</span> <span class="n">along</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_position</span> <span class="o">=</span> <span class="n">position</span> <span class="c"># M coordinates</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_width</span> <span class="o">=</span> <span class="n">width</span>       <span class="c"># M bar widths</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_baseline</span> <span class="o">=</span> <span class="n">baseline</span> <span class="c"># M baseline coordinates</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_series</span> <span class="o">=</span> <span class="n">series</span>     <span class="c"># M x N bar magnitudes</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_fill</span> <span class="o">=</span> <span class="n">fill</span>         <span class="c"># M x 4N fill colors</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_opacity</span> <span class="o">=</span> <span class="n">opacity</span>   <span class="c"># M x N opacities</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_title</span> <span class="o">=</span> <span class="n">title</span>       <span class="c"># M x N titles</span>
</div>
<div class="viewcode-block" id="FillBoundariesMark"><a class="viewcode-back" href="../toyplot.html#toyplot.FillBoundariesMark">[docs]</a><span class="k">class</span> <span class="nc">FillBoundariesMark</span><span class="p">(</span><span class="n">Mark</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Render multiple stacked fill regions defined by boundaries.</span>

<span class="sd">  Do not create FillBoundariesMark instances directly.  Use factory methods such</span>
<span class="sd">  as :meth:`toyplot.Axes2D.fill` instead.</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">along</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">series</span><span class="p">,</span> <span class="n">fill</span><span class="p">,</span> <span class="n">opacity</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="n">Mark</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_along</span> <span class="o">=</span> <span class="n">along</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_position</span> <span class="o">=</span> <span class="n">position</span> <span class="c"># M coordinates</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_series</span> <span class="o">=</span> <span class="n">series</span>     <span class="c"># M x N fill boundaries</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_fill</span> <span class="o">=</span> <span class="n">fill</span>         <span class="c"># N-1 fill colors</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_opacity</span> <span class="o">=</span> <span class="n">opacity</span>   <span class="c"># N-1 opacities</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_title</span> <span class="o">=</span> <span class="n">title</span>       <span class="c"># N-1 titles</span>
</div>
<div class="viewcode-block" id="FillMagnitudesMark"><a class="viewcode-back" href="../toyplot.html#toyplot.FillMagnitudesMark">[docs]</a><span class="k">class</span> <span class="nc">FillMagnitudesMark</span><span class="p">(</span><span class="n">Mark</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Render multiple stacked fill regions defined by magnitudes.</span>

<span class="sd">  Do not create FillMagnitudesMark instances directly.  Use factory methods such</span>
<span class="sd">  as :meth:`toyplot.Axes2D.fill` instead.</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">along</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">baseline</span><span class="p">,</span> <span class="n">series</span><span class="p">,</span> <span class="n">fill</span><span class="p">,</span> <span class="n">opacity</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="n">Mark</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_along</span> <span class="o">=</span> <span class="n">along</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_position</span> <span class="o">=</span> <span class="n">position</span> <span class="c"># M coordinates</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_baseline</span> <span class="o">=</span> <span class="n">baseline</span> <span class="c"># M baseline coordinates</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_series</span> <span class="o">=</span> <span class="n">series</span>     <span class="c"># M x N fill magnitudes</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_fill</span> <span class="o">=</span> <span class="n">fill</span>         <span class="c"># N fill colors</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_opacity</span> <span class="o">=</span> <span class="n">opacity</span>   <span class="c"># N opacities</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_title</span> <span class="o">=</span> <span class="n">title</span>       <span class="c"># N titles</span>
</div>
<div class="viewcode-block" id="PlotMark"><a class="viewcode-back" href="../toyplot.html#toyplot.PlotMark">[docs]</a><span class="k">class</span> <span class="nc">PlotMark</span><span class="p">(</span><span class="n">Mark</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Plot multiple bivariate data series using lines and/or markers.</span>

<span class="sd">  Do not create PlotMark instances directly.  Use factory methods such</span>
<span class="sd">  as :meth:`toyplot.Axes2D.plot` instead.</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">along</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">series</span><span class="p">,</span> <span class="n">stroke</span><span class="p">,</span> <span class="n">stroke_width</span><span class="p">,</span> <span class="n">stroke_opacity</span><span class="p">,</span> <span class="n">marker</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">fill</span><span class="p">,</span> <span class="n">opacity</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="n">mstyle</span><span class="p">,</span> <span class="n">mlstyle</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="n">Mark</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_along</span> <span class="o">=</span> <span class="n">along</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_position</span> <span class="o">=</span> <span class="n">position</span>             <span class="c"># M coordinates</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_series</span> <span class="o">=</span> <span class="n">series</span>                 <span class="c"># M x N coordinates</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_stroke</span> <span class="o">=</span> <span class="n">stroke</span>                 <span class="c"># N stroke colors</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_stroke_width</span> <span class="o">=</span> <span class="n">stroke_width</span>     <span class="c"># N stroke widths</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_stroke_opacity</span> <span class="o">=</span> <span class="n">stroke_opacity</span> <span class="c"># N stroke opacities</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_marker</span> <span class="o">=</span> <span class="n">marker</span>                 <span class="c"># M x N markers</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_size</span> <span class="o">=</span> <span class="n">size</span>                     <span class="c"># M x N marker sizes</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_fill</span> <span class="o">=</span> <span class="n">fill</span>                     <span class="c"># M x N marker fill colors</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_opacity</span> <span class="o">=</span> <span class="n">opacity</span>               <span class="c"># M x N marker opacities</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_title</span> <span class="o">=</span> <span class="n">title</span>                   <span class="c"># N titles</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_mstyle</span> <span class="o">=</span> <span class="n">mstyle</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_mlstyle</span> <span class="o">=</span> <span class="n">mlstyle</span>

<span class="c">###############################################################################################</span>
<span class="c"># Tick Locators</span>
</div>
<div class="viewcode-block" id="ExplicitTickLocator"><a class="viewcode-back" href="../toyplot.html#toyplot.ExplicitTickLocator">[docs]</a><span class="k">class</span> <span class="nc">ExplicitTickLocator</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Explicitly specify a collection of tick locations and labels for an axis.</span>

<span class="sd">  Parameters</span>
<span class="sd">  ----------</span>
<span class="sd">  locations : sequence of tick locations</span>
<span class="sd">  labels : sequence of tick labels (strings), optional</span>
<span class="sd">  format : format string used to generate labels from tick locations, optional</span>
<span class="sd">  titles : sequence of tick titles (strings), optional</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">locations</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">titles</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s">&quot;{:g}&quot;</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">locations</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">labels</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">locations</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">locations</span><span class="p">)</span>
      <span class="n">labels</span> <span class="o">=</span> <span class="n">_require_string_array</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">locations</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">locations</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">locations</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">locations</span><span class="p">)</span>
      <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">format</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">location</span><span class="p">)</span> <span class="k">for</span> <span class="n">location</span> <span class="ow">in</span> <span class="n">locations</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">labels</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">labels</span> <span class="o">=</span> <span class="n">_require_string_array</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
      <span class="n">locations</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Must supply locations, labels, or both.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">titles</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">titles</span> <span class="o">=</span> <span class="n">_require_string_array</span><span class="p">(</span><span class="n">titles</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">locations</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">titles</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">locations</span><span class="p">))</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_locations</span> <span class="o">=</span> <span class="n">locations</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_labels</span> <span class="o">=</span> <span class="n">labels</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_titles</span> <span class="o">=</span> <span class="n">titles</span>

<div class="viewcode-block" id="ExplicitTickLocator.ticks"><a class="viewcode-back" href="../toyplot.html#toyplot.ExplicitTickLocator.ticks">[docs]</a>  <span class="k">def</span> <span class="nf">ticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain_min</span><span class="p">,</span> <span class="n">domain_max</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_locations</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_labels</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_titles</span>
</div></div>
<div class="viewcode-block" id="BasicTickLocator"><a class="viewcode-back" href="../toyplot.html#toyplot.BasicTickLocator">[docs]</a><span class="k">class</span> <span class="nc">BasicTickLocator</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Generate N evenly spaced ticks that include the minimum and maximum values of a domain.</span>

<span class="sd">  Parameters</span>
<span class="sd">  ----------</span>
<span class="sd">  count : number of ticks to generate, optional</span>
<span class="sd">  format : format string used to generate labels from tick locations, optional</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s">&quot;{:g}&quot;</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_count</span> <span class="o">=</span> <span class="n">count</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_format</span> <span class="o">=</span> <span class="n">format</span>
<div class="viewcode-block" id="BasicTickLocator.ticks"><a class="viewcode-back" href="../toyplot.html#toyplot.BasicTickLocator.ticks">[docs]</a>  <span class="k">def</span> <span class="nf">ticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain_min</span><span class="p">,</span> <span class="n">domain_max</span><span class="p">):</span>
    <span class="n">locations</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">domain_min</span><span class="p">,</span> <span class="n">domain_max</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_count</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_format</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">location</span><span class="p">)</span> <span class="k">for</span> <span class="n">location</span> <span class="ow">in</span> <span class="n">locations</span><span class="p">]</span>
    <span class="n">titles</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">locations</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">titles</span>
</div></div>
<div class="viewcode-block" id="PositiveLogTickLocator"><a class="viewcode-back" href="../toyplot.html#toyplot.PositiveLogTickLocator">[docs]</a><span class="k">class</span> <span class="nc">PositiveLogTickLocator</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Generate ticks that are evenly spaced on a logarithmic scale, when the entire domain is positive.</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_base</span> <span class="o">=</span> <span class="n">base</span>
<div class="viewcode-block" id="PositiveLogTickLocator.ticks"><a class="viewcode-back" href="../toyplot.html#toyplot.PositiveLogTickLocator.ticks">[docs]</a>  <span class="k">def</span> <span class="nf">ticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain_min</span><span class="p">,</span> <span class="n">domain_max</span><span class="p">):</span>
    <span class="n">exponents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">domain_min</span><span class="p">)</span> <span class="o">/</span> <span class="n">numpy</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_base</span><span class="p">)),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">domain_max</span><span class="p">)</span> <span class="o">/</span> <span class="n">numpy</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_base</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">locations</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_base</span><span class="p">,</span> <span class="n">exponents</span><span class="p">)</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">e</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_base</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">exponent</span><span class="p">))</span> <span class="k">for</span> <span class="n">exponent</span> <span class="ow">in</span> <span class="n">exponents</span><span class="p">]</span>
    <span class="n">titles</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">locations</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">titles</span>
</div></div>
<div class="viewcode-block" id="NegativeLogTickLocator"><a class="viewcode-back" href="../toyplot.html#toyplot.NegativeLogTickLocator">[docs]</a><span class="k">class</span> <span class="nc">NegativeLogTickLocator</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Generate ticks that are evenly spaced on a logarithmic scale, when the entire domain is negative.</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_base</span> <span class="o">=</span> <span class="n">base</span>
<div class="viewcode-block" id="NegativeLogTickLocator.ticks"><a class="viewcode-back" href="../toyplot.html#toyplot.NegativeLogTickLocator.ticks">[docs]</a>  <span class="k">def</span> <span class="nf">ticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain_min</span><span class="p">,</span> <span class="n">domain_max</span><span class="p">):</span>
    <span class="n">exponents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">domain_min</span><span class="p">))</span> <span class="o">/</span> <span class="n">numpy</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_base</span><span class="p">)),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">domain_max</span><span class="p">))</span> <span class="o">/</span> <span class="n">numpy</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_base</span><span class="p">))</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">locations</span> <span class="o">=</span> <span class="o">-</span><span class="n">numpy</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_base</span><span class="p">,</span> <span class="n">exponents</span><span class="p">)</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;-</span><span class="si">%s</span><span class="s">e</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_base</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">exponent</span><span class="p">))</span> <span class="k">for</span> <span class="n">exponent</span> <span class="ow">in</span> <span class="n">exponents</span><span class="p">]</span>
    <span class="n">titles</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">locations</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">titles</span>
</div></div>
<div class="viewcode-block" id="SymmetricLogTickLocator"><a class="viewcode-back" href="../toyplot.html#toyplot.SymmetricLogTickLocator">[docs]</a><span class="k">class</span> <span class="nc">SymmetricLogTickLocator</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Generate ticks that are evenly spaced on a logarithmic scale, when the domain straddles zero.</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_base</span> <span class="o">=</span> <span class="n">base</span>
<div class="viewcode-block" id="SymmetricLogTickLocator.ticks"><a class="viewcode-back" href="../toyplot.html#toyplot.SymmetricLogTickLocator.ticks">[docs]</a>  <span class="k">def</span> <span class="nf">ticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain_min</span><span class="p">,</span> <span class="n">domain_max</span><span class="p">):</span>
    <span class="n">negative_exponents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">domain_min</span><span class="p">))</span> <span class="o">/</span> <span class="n">numpy</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_base</span><span class="p">)),</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">domain_min</span> <span class="o">!=</span> <span class="mi">0</span> <span class="k">else</span> <span class="p">[]</span>
    <span class="n">linear_locations</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">positive_exponents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">domain_max</span><span class="p">)</span> <span class="o">/</span> <span class="n">numpy</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_base</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">domain_max</span> <span class="o">!=</span> <span class="mi">0</span> <span class="k">else</span> <span class="p">[]</span>

    <span class="n">locations</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="o">-</span><span class="n">numpy</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_base</span><span class="p">,</span> <span class="n">negative_exponents</span><span class="p">),</span> <span class="n">linear_locations</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_base</span><span class="p">,</span> <span class="n">positive_exponents</span><span class="p">)))</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;-</span><span class="si">%s</span><span class="s">e</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_base</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">exponent</span><span class="p">))</span> <span class="k">for</span> <span class="n">exponent</span> <span class="ow">in</span> <span class="n">negative_exponents</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">location</span><span class="p">)</span> <span class="k">for</span> <span class="n">location</span> <span class="ow">in</span> <span class="n">linear_locations</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">e</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_base</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">exponent</span><span class="p">))</span> <span class="k">for</span> <span class="n">exponent</span> <span class="ow">in</span> <span class="n">positive_exponents</span><span class="p">]</span>
    <span class="n">titles</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">locations</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">titles</span>
</div></div>
<div class="viewcode-block" id="HeckbertTickLocator"><a class="viewcode-back" href="../toyplot.html#toyplot.HeckbertTickLocator">[docs]</a><span class="k">class</span> <span class="nc">HeckbertTickLocator</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Generate ticks using the &quot;Nice numbers for graph labels&quot; algorithm by Paul Heckbert.</span>

<span class="sd">  Note that this locator can produce ticks outside the minimum / maximum axis</span>
<span class="sd">  domain.</span>

<span class="sd">  Parameters</span>
<span class="sd">  ----------</span>
<span class="sd">  count : number of ticks to generate</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_count</span> <span class="o">=</span> <span class="n">count</span>
<div class="viewcode-block" id="HeckbertTickLocator.ticks"><a class="viewcode-back" href="../toyplot.html#toyplot.HeckbertTickLocator.ticks">[docs]</a>  <span class="k">def</span> <span class="nf">ticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain_min</span><span class="p">,</span> <span class="n">domain_max</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">nicenum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">rounding</span><span class="p">):</span>
      <span class="n">exponent</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
      <span class="n">fraction</span> <span class="o">=</span> <span class="n">x</span> <span class="o">/</span> <span class="n">numpy</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">exponent</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">rounding</span><span class="p">:</span> <span class="c"># pragma: no cover</span>
        <span class="k">if</span> <span class="n">fraction</span> <span class="o">&lt;</span> <span class="mf">1.5</span><span class="p">:</span>
          <span class="n">nice_fraction</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">fraction</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
          <span class="n">nice_fraction</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="k">elif</span> <span class="n">fraction</span> <span class="o">&lt;</span> <span class="mi">7</span><span class="p">:</span>
          <span class="n">nice_fraction</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="k">else</span><span class="p">:</span>
          <span class="n">nice_fraction</span> <span class="o">=</span> <span class="mi">10</span>
      <span class="k">else</span><span class="p">:</span> <span class="c"># pragma: no cover</span>
        <span class="k">if</span> <span class="n">fraction</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
          <span class="n">nice_fraction</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">fraction</span> <span class="o">&lt;=</span> <span class="mi">2</span><span class="p">:</span>
          <span class="n">nice_fraction</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="k">elif</span> <span class="n">fraction</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">:</span>
          <span class="n">nice_fraction</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="k">else</span><span class="p">:</span>
          <span class="n">nice_fraction</span> <span class="o">=</span> <span class="mi">10</span>
      <span class="k">return</span> <span class="n">nice_fraction</span> <span class="o">*</span> <span class="n">numpy</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">exponent</span><span class="p">);</span>

    <span class="n">tick_range</span> <span class="o">=</span> <span class="n">nicenum</span><span class="p">(</span><span class="n">domain_max</span> <span class="o">-</span> <span class="n">domain_min</span><span class="p">,</span> <span class="n">rounding</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">tick_spacing</span> <span class="o">=</span> <span class="n">nicenum</span><span class="p">(</span><span class="n">tick_range</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span> <span class="n">rounding</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">tick_min</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">domain_min</span> <span class="o">/</span> <span class="n">tick_spacing</span><span class="p">)</span> <span class="o">*</span> <span class="n">tick_spacing</span>
    <span class="n">tick_max</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">domain_max</span> <span class="o">/</span> <span class="n">tick_spacing</span><span class="p">)</span> <span class="o">*</span> <span class="n">tick_spacing</span>
    <span class="n">locations</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">tick_min</span><span class="p">,</span> <span class="n">tick_max</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_count</span><span class="p">)</span>
    <span class="n">digits</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="o">-</span><span class="n">numpy</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">tick_spacing</span><span class="p">)),</span> <span class="mi">0</span><span class="p">))</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;</span><span class="si">%.*f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">digits</span><span class="p">,</span> <span class="n">location</span><span class="p">)</span> <span class="k">for</span> <span class="n">location</span> <span class="ow">in</span> <span class="n">locations</span><span class="p">]</span>
    <span class="n">titles</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">locations</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">titles</span>

<span class="c"># An alpha version of the Talbot, Lin, Hanrahan tick mark generator for matplotlib.</span>
<span class="c"># Described in &quot;An Extension of Wilkinson&#39;s Algorithm for Positioning Tick Labels on Axes&quot;</span>
<span class="c"># by Justin Talbot, Sharon Lin, and Pat Hanrahan, InfoVis 2010.</span>

<span class="c"># Implementation by Justin Talbot</span>
<span class="c"># This implementation is in the public domain.</span>
<span class="c"># Report bugs to jtalbot@stanford.edu</span>

<span class="c"># A shortcoming:</span>
<span class="c"># The weights used in the paper were designed for static plots where the extent of</span>
<span class="c"># the tick marks unioned with the extent of the data defines the extent of the plot.</span>
<span class="c"># In a plot where the extent of the plot is defined by the user (e.g. an interactive</span>
<span class="c"># plot supporting panning and zooming), the weights don&#39;t work as well. In particular,</span>
<span class="c"># you would want to retune them assuming that the tick labels must be inside</span>
<span class="c"># the provided view range. You probably want higher weighting on simplicity and lower</span>
<span class="c"># on coverage and possibly density. But I haven&#39;t experimented in any detail with this.</span>
<span class="c">#</span>
<span class="c"># If you do intend on using this for static plots in matplotlib, you should set</span>
<span class="c"># only_inside to False in the call to Extended.extended. And then you should</span>
<span class="c"># manually set your view extent to include the min and max ticks if they are outside</span>
<span class="c"># the data range. This should produce the same results as the paper.</span>
</div></div>
<div class="viewcode-block" id="ExtendedTickLocator"><a class="viewcode-back" href="../toyplot.html#toyplot.ExtendedTickLocator">[docs]</a><span class="k">class</span> <span class="nc">ExtendedTickLocator</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Generate ticks using &quot;An Extension of Wilkinson&#39;s Algorithm for Positioning Tick Labels on Axes&quot; by Talbot, Lin, and Hanrahan.</span>

<span class="sd">  Parameters</span>
<span class="sd">  ----------</span>
<span class="sd">  count : desired number of ticks</span>
<span class="sd">    Note that the algorithm may produce fewer ticks than requested.</span>
<span class="sd">  steps : prioritized list of &quot;nice&quot; values to use for generating ticks.</span>
<span class="sd">  only_inside : boolean</span>
<span class="sd">    If set to `True`, only ticks inside the axis domain will be generated.</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">steps</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">only_inside</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_count</span> <span class="o">=</span> <span class="n">count</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_steps</span> <span class="o">=</span> <span class="n">steps</span> <span class="k">if</span> <span class="n">steps</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_weights</span> <span class="o">=</span> <span class="n">weigths</span> <span class="k">if</span> <span class="n">weights</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_only_inside</span> <span class="o">=</span> <span class="n">only_inside</span>

<div class="viewcode-block" id="ExtendedTickLocator.ticks"><a class="viewcode-back" href="../toyplot.html#toyplot.ExtendedTickLocator.ticks">[docs]</a>  <span class="k">def</span> <span class="nf">ticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain_min</span><span class="p">,</span> <span class="n">domain_max</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">coverage</span><span class="p">(</span><span class="n">dmin</span><span class="p">,</span> <span class="n">dmax</span><span class="p">,</span> <span class="n">lmin</span><span class="p">,</span> <span class="n">lmax</span><span class="p">):</span>
      <span class="nb">range</span> <span class="o">=</span> <span class="n">dmax</span><span class="o">-</span><span class="n">dmin</span>
      <span class="k">return</span> <span class="mi">1</span> <span class="o">-</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="n">dmax</span><span class="o">-</span><span class="n">lmax</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">+</span><span class="n">numpy</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="n">dmin</span><span class="o">-</span><span class="n">lmin</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">/</span> <span class="n">numpy</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="mf">0.1</span> <span class="o">*</span> <span class="nb">range</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">coverage_max</span><span class="p">(</span><span class="n">dmin</span><span class="p">,</span> <span class="n">dmax</span><span class="p">,</span> <span class="n">span</span><span class="p">):</span>
      <span class="nb">range</span> <span class="o">=</span> <span class="n">dmax</span><span class="o">-</span><span class="n">dmin</span>
      <span class="k">if</span> <span class="n">span</span> <span class="o">&gt;</span> <span class="nb">range</span><span class="p">:</span>
        <span class="n">half</span> <span class="o">=</span> <span class="p">(</span><span class="n">span</span><span class="o">-</span><span class="nb">range</span><span class="p">)</span><span class="o">/</span><span class="mf">2.0</span>
        <span class="k">return</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">numpy</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="n">half</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="n">numpy</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="mf">0.1</span><span class="o">*</span><span class="nb">range</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">density</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">dmin</span><span class="p">,</span> <span class="n">dmax</span><span class="p">,</span> <span class="n">lmin</span><span class="p">,</span> <span class="n">lmax</span><span class="p">):</span>
      <span class="n">r</span> <span class="o">=</span> <span class="p">(</span><span class="n">k</span><span class="o">-</span><span class="mf">1.0</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">lmax</span><span class="o">-</span><span class="n">lmin</span><span class="p">)</span>
      <span class="n">rt</span> <span class="o">=</span> <span class="p">(</span><span class="n">m</span><span class="o">-</span><span class="mf">1.0</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">lmax</span><span class="p">,</span> <span class="n">dmax</span><span class="p">)</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">lmin</span><span class="p">,</span> <span class="n">dmin</span><span class="p">))</span>
      <span class="k">return</span> <span class="mi">2</span> <span class="o">-</span> <span class="nb">max</span><span class="p">(</span> <span class="n">r</span><span class="o">/</span><span class="n">rt</span><span class="p">,</span> <span class="n">rt</span><span class="o">/</span><span class="n">r</span> <span class="p">)</span>

    <span class="k">def</span> <span class="nf">density_max</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">m</span><span class="p">):</span>
      <span class="k">if</span> <span class="n">k</span> <span class="o">&gt;=</span> <span class="n">m</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">2</span> <span class="o">-</span> <span class="p">(</span><span class="n">k</span><span class="o">-</span><span class="mf">1.0</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">m</span><span class="o">-</span><span class="mf">1.0</span><span class="p">)</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">simplicity</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">Q</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">lmin</span><span class="p">,</span> <span class="n">lmax</span><span class="p">,</span> <span class="n">lstep</span><span class="p">):</span>
      <span class="n">eps</span> <span class="o">=</span> <span class="mf">1e-10</span>
      <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">Q</span><span class="p">)</span>
      <span class="n">i</span> <span class="o">=</span> <span class="n">Q</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">q</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span>
      <span class="n">v</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="p">((</span><span class="n">lmin</span> <span class="o">%</span> <span class="n">lstep</span> <span class="o">&lt;</span> <span class="n">eps</span> <span class="ow">or</span> <span class="p">(</span><span class="n">lstep</span> <span class="o">-</span> <span class="n">lmin</span> <span class="o">%</span> <span class="n">lstep</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">eps</span><span class="p">)</span> <span class="ow">and</span> <span class="n">lmin</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">lmax</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">else</span> <span class="mi">0</span>
      <span class="k">return</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="n">i</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mf">1.0</span><span class="p">)</span> <span class="o">+</span> <span class="n">v</span> <span class="o">-</span> <span class="n">j</span>

    <span class="k">def</span> <span class="nf">simplicity_max</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">Q</span><span class="p">,</span> <span class="n">j</span><span class="p">):</span>
      <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">Q</span><span class="p">)</span>
      <span class="n">i</span> <span class="o">=</span> <span class="n">Q</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">q</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span>
      <span class="n">v</span> <span class="o">=</span> <span class="mi">1</span>
      <span class="k">return</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="n">i</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mf">1.0</span><span class="p">)</span> <span class="o">+</span> <span class="n">v</span> <span class="o">-</span> <span class="n">j</span>


    <span class="k">def</span> <span class="nf">legibility</span><span class="p">(</span><span class="n">lmin</span><span class="p">,</span> <span class="n">lmax</span><span class="p">,</span> <span class="n">lstep</span><span class="p">):</span>
      <span class="k">return</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">legibility_max</span><span class="p">(</span><span class="n">lmin</span><span class="p">,</span> <span class="n">lmax</span><span class="p">,</span> <span class="n">lstep</span><span class="p">):</span>
      <span class="k">return</span> <span class="mi">1</span> <span class="c"># pragma: no cover</span>

    <span class="k">def</span> <span class="nf">extended</span><span class="p">(</span><span class="n">dmin</span><span class="p">,</span> <span class="n">dmax</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">Q</span><span class="p">,</span> <span class="n">only_inside</span><span class="p">,</span> <span class="n">w</span><span class="p">):</span>
      <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">Q</span><span class="p">)</span>
      <span class="n">best_score</span> <span class="o">=</span> <span class="o">-</span><span class="mf">2.0</span>

      <span class="n">j</span> <span class="o">=</span> <span class="mf">1.0</span>
      <span class="k">while</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="nb">float</span><span class="p">(</span><span class="s">&#39;infinity&#39;</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">Q</span><span class="p">:</span>
          <span class="n">sm</span> <span class="o">=</span> <span class="n">simplicity_max</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">Q</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>

          <span class="k">if</span> <span class="n">w</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">sm</span> <span class="o">+</span> <span class="n">w</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">w</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">w</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">best_score</span><span class="p">:</span>
            <span class="n">j</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s">&#39;infinity&#39;</span><span class="p">)</span>
            <span class="k">break</span>

          <span class="n">k</span> <span class="o">=</span> <span class="mf">2.0</span>
          <span class="k">while</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="nb">float</span><span class="p">(</span><span class="s">&#39;infinity&#39;</span><span class="p">):</span>
            <span class="n">dm</span> <span class="o">=</span> <span class="n">density_max</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">w</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">sm</span> <span class="o">+</span> <span class="n">w</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">w</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">dm</span> <span class="o">+</span> <span class="n">w</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">best_score</span><span class="p">:</span>
              <span class="k">break</span>

            <span class="n">delta</span> <span class="o">=</span> <span class="p">(</span><span class="n">dmax</span><span class="o">-</span><span class="n">dmin</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">k</span><span class="o">+</span><span class="mf">1.0</span><span class="p">)</span><span class="o">/</span><span class="n">j</span><span class="o">/</span><span class="n">q</span>
            <span class="n">z</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">delta</span><span class="p">))</span>

            <span class="k">while</span> <span class="n">z</span> <span class="o">&lt;</span> <span class="nb">float</span><span class="p">(</span><span class="s">&#39;infinity&#39;</span><span class="p">):</span>
              <span class="n">step</span> <span class="o">=</span> <span class="n">j</span><span class="o">*</span><span class="n">q</span><span class="o">*</span><span class="n">numpy</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="n">z</span><span class="p">)</span>
              <span class="n">cm</span> <span class="o">=</span> <span class="n">coverage_max</span><span class="p">(</span><span class="n">dmin</span><span class="p">,</span> <span class="n">dmax</span><span class="p">,</span> <span class="n">step</span><span class="o">*</span><span class="p">(</span><span class="n">k</span><span class="o">-</span><span class="mf">1.0</span><span class="p">))</span>

              <span class="k">if</span> <span class="n">w</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">sm</span> <span class="o">+</span> <span class="n">w</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">cm</span> <span class="o">+</span> <span class="n">w</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">dm</span> <span class="o">+</span> <span class="n">w</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">best_score</span><span class="p">:</span>
                <span class="k">break</span>

              <span class="n">min_start</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">dmax</span><span class="o">/</span><span class="n">step</span><span class="p">)</span><span class="o">*</span><span class="n">j</span> <span class="o">-</span> <span class="p">(</span><span class="n">k</span><span class="o">-</span><span class="mf">1.0</span><span class="p">)</span><span class="o">*</span><span class="n">j</span>
              <span class="n">max_start</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">dmin</span><span class="o">/</span><span class="n">step</span><span class="p">)</span><span class="o">*</span><span class="n">j</span>

              <span class="k">if</span> <span class="n">min_start</span> <span class="o">&gt;</span> <span class="n">max_start</span><span class="p">:</span>
                <span class="n">z</span> <span class="o">=</span> <span class="n">z</span><span class="o">+</span><span class="mi">1</span>
                <span class="k">break</span>

              <span class="k">for</span> <span class="n">start</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">min_start</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">max_start</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">lmin</span> <span class="o">=</span> <span class="n">start</span> <span class="o">*</span> <span class="p">(</span><span class="n">step</span><span class="o">/</span><span class="n">j</span><span class="p">)</span>
                <span class="n">lmax</span> <span class="o">=</span> <span class="n">lmin</span> <span class="o">+</span> <span class="n">step</span><span class="o">*</span><span class="p">(</span><span class="n">k</span><span class="o">-</span><span class="mf">1.0</span><span class="p">)</span>
                <span class="n">lstep</span> <span class="o">=</span> <span class="n">step</span>

                <span class="n">s</span> <span class="o">=</span> <span class="n">simplicity</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">Q</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">lmin</span><span class="p">,</span> <span class="n">lmax</span><span class="p">,</span> <span class="n">lstep</span><span class="p">)</span>
                <span class="n">c</span> <span class="o">=</span> <span class="n">coverage</span><span class="p">(</span><span class="n">dmin</span><span class="p">,</span> <span class="n">dmax</span><span class="p">,</span> <span class="n">lmin</span><span class="p">,</span> <span class="n">lmax</span><span class="p">)</span>
                <span class="n">d</span> <span class="o">=</span> <span class="n">density</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">dmin</span><span class="p">,</span> <span class="n">dmax</span><span class="p">,</span> <span class="n">lmin</span><span class="p">,</span> <span class="n">lmax</span><span class="p">)</span>
                <span class="n">l</span> <span class="o">=</span> <span class="n">legibility</span><span class="p">(</span><span class="n">lmin</span><span class="p">,</span> <span class="n">lmax</span><span class="p">,</span> <span class="n">lstep</span><span class="p">)</span>

                <span class="n">score</span> <span class="o">=</span> <span class="n">w</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">s</span> <span class="o">+</span> <span class="n">w</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">c</span> <span class="o">+</span> <span class="n">w</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">d</span> <span class="o">+</span> <span class="n">w</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="n">l</span>

                <span class="k">if</span> <span class="n">score</span> <span class="o">&gt;</span> <span class="n">best_score</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">only_inside</span> <span class="ow">or</span> <span class="p">(</span><span class="n">lmin</span> <span class="o">&gt;=</span> <span class="n">dmin</span> <span class="ow">and</span> <span class="n">lmax</span> <span class="o">&lt;=</span> <span class="n">dmax</span><span class="p">)):</span>
                  <span class="n">best_score</span> <span class="o">=</span> <span class="n">score</span>
                  <span class="n">best</span> <span class="o">=</span> <span class="p">(</span><span class="n">lmin</span><span class="p">,</span> <span class="n">lmax</span><span class="p">,</span> <span class="n">lstep</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
              <span class="n">z</span> <span class="o">=</span> <span class="n">z</span><span class="o">+</span><span class="mi">1</span>
            <span class="n">k</span> <span class="o">=</span> <span class="n">k</span><span class="o">+</span><span class="mi">1</span>
        <span class="n">j</span> <span class="o">=</span> <span class="n">j</span><span class="o">+</span><span class="mi">1</span>
      <span class="k">return</span> <span class="n">best</span>

    <span class="n">lmin</span><span class="p">,</span> <span class="n">lmax</span><span class="p">,</span> <span class="n">lstep</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="n">extended</span><span class="p">(</span><span class="n">domain_min</span><span class="p">,</span> <span class="n">domain_max</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_only_inside</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weights</span><span class="p">)</span>
    <span class="n">locations</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">*</span> <span class="n">lstep</span> <span class="o">+</span> <span class="n">lmin</span>
    <span class="n">digits</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="o">-</span><span class="n">numpy</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">lstep</span><span class="p">)),</span> <span class="mi">0</span><span class="p">))</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;</span><span class="si">%.*f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">digits</span><span class="p">,</span> <span class="n">location</span><span class="p">)</span> <span class="k">for</span> <span class="n">location</span> <span class="ow">in</span> <span class="n">locations</span><span class="p">]</span>
    <span class="n">titles</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">locations</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">titles</span>


<span class="c">###############################################################################################</span>
<span class="c"># Axes (projections)</span>
</div></div>
<div class="viewcode-block" id="Axes2D"><a class="viewcode-back" href="../toyplot.html#toyplot.Axes2D">[docs]</a><span class="k">class</span> <span class="nc">Axes2D</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Standard two-dimensional Cartesian coordinate system.</span>

<span class="sd">  Do not create Axes2D instances directly.  Use factory methods such</span>
<span class="sd">  as :meth:`toyplot.Canvas.axes` instead.</span>
<span class="sd">  &quot;&quot;&quot;</span>
<div class="viewcode-block" id="Axes2D.AxisHelper"><a class="viewcode-back" href="../toyplot.html#toyplot.Axes2D.AxisHelper">[docs]</a>  <span class="k">class</span> <span class="nc">AxisHelper</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">show</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">label_style</span><span class="p">,</span> <span class="nb">min</span><span class="p">,</span> <span class="nb">max</span><span class="p">,</span> <span class="n">tick_length</span><span class="p">,</span> <span class="n">tick_locator</span><span class="p">,</span> <span class="n">tick_angle</span><span class="p">,</span> <span class="n">scale</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">spine</span> <span class="o">=</span> <span class="n">Axes2D</span><span class="o">.</span><span class="n">SpineHelper</span><span class="p">()</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">ticks</span> <span class="o">=</span> <span class="n">Axes2D</span><span class="o">.</span><span class="n">TicksHelper</span><span class="p">(</span><span class="n">tick_length</span><span class="p">,</span> <span class="n">tick_locator</span><span class="p">,</span> <span class="n">tick_angle</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">Axes2D</span><span class="o">.</span><span class="n">LabelHelper</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">label_style</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">domain</span> <span class="o">=</span> <span class="n">Axes2D</span><span class="o">.</span><span class="n">DomainHelper</span><span class="p">(</span><span class="nb">min</span><span class="p">,</span> <span class="nb">max</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_show</span> <span class="o">=</span> <span class="n">show</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="n">scale</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
      <span class="k">if</span> <span class="n">show</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_show</span> <span class="o">=</span> <span class="n">show</span>
      <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="n">scale</span>
</div>
<div class="viewcode-block" id="Axes2D.CoordinatesHelper"><a class="viewcode-back" href="../toyplot.html#toyplot.Axes2D.CoordinatesHelper">[docs]</a>  <span class="k">class</span> <span class="nc">CoordinatesHelper</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">show</span><span class="p">,</span> <span class="n">xmin_range</span><span class="p">,</span> <span class="n">xmax_range</span><span class="p">,</span> <span class="n">ymin_range</span><span class="p">,</span> <span class="n">ymax_range</span><span class="p">,</span> <span class="n">style</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_show</span> <span class="o">=</span> <span class="n">show</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_xmin_range</span> <span class="o">=</span> <span class="n">xmin_range</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_xmax_range</span> <span class="o">=</span> <span class="n">xmax_range</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_ymin_range</span> <span class="o">=</span> <span class="n">ymin_range</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_ymax_range</span> <span class="o">=</span> <span class="n">ymax_range</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_style</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;stroke&quot;</span><span class="p">:</span><span class="s">&quot;none&quot;</span><span class="p">,</span> <span class="s">&quot;fill&quot;</span><span class="p">:</span><span class="s">&quot;white&quot;</span><span class="p">,</span> <span class="s">&quot;opacity&quot;</span><span class="p">:</span><span class="mf">0.75</span><span class="p">}</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">Axes2D</span><span class="o">.</span><span class="n">CoordinatesLabelHelper</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="p">{})</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
      <span class="k">if</span> <span class="n">show</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_show</span> <span class="o">=</span> <span class="n">show</span>
      <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Axes2D.CoordinatesLabelHelper"><a class="viewcode-back" href="../toyplot.html#toyplot.Axes2D.CoordinatesLabelHelper">[docs]</a>  <span class="k">class</span> <span class="nc">CoordinatesLabelHelper</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">style</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_style</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;font-size&quot;</span><span class="p">:</span><span class="s">&quot;10px&quot;</span><span class="p">,</span> <span class="s">&quot;font-weight&quot;</span><span class="p">:</span><span class="s">&quot;normal&quot;</span><span class="p">,</span> <span class="s">&quot;stroke&quot;</span><span class="p">:</span><span class="s">&quot;none&quot;</span><span class="p">,</span> <span class="s">&quot;text-anchor&quot;</span><span class="p">:</span><span class="s">&quot;middle&quot;</span><span class="p">,</span> <span class="s">&quot;alignment-baseline&quot;</span><span class="p">:</span><span class="s">&quot;middle&quot;</span><span class="p">}</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
      <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Axes2D.DomainHelper"><a class="viewcode-back" href="../toyplot.html#toyplot.Axes2D.DomainHelper">[docs]</a>  <span class="k">class</span> <span class="nc">DomainHelper</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">min</span><span class="p">,</span> <span class="nb">max</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_min</span> <span class="o">=</span> <span class="nb">min</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_max</span> <span class="o">=</span> <span class="nb">max</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
      <span class="k">if</span> <span class="nb">min</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_min</span> <span class="o">=</span> <span class="nb">min</span>
      <span class="k">if</span> <span class="nb">max</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max</span> <span class="o">=</span> <span class="nb">max</span>
</div>
<div class="viewcode-block" id="Axes2D.LabelHelper"><a class="viewcode-back" href="../toyplot.html#toyplot.Axes2D.LabelHelper">[docs]</a>  <span class="k">class</span> <span class="nc">LabelHelper</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{}):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_text</span> <span class="o">=</span> <span class="n">label</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_style</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;font-weight&quot;</span><span class="p">:</span><span class="s">&quot;bold&quot;</span><span class="p">,</span> <span class="s">&quot;stroke&quot;</span><span class="p">:</span><span class="s">&quot;none&quot;</span><span class="p">,</span> <span class="s">&quot;text-anchor&quot;</span><span class="p">:</span><span class="s">&quot;middle&quot;</span><span class="p">,</span> <span class="s">&quot;alignment-baseline&quot;</span><span class="p">:</span><span class="s">&quot;middle&quot;</span><span class="p">}</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
      <span class="k">if</span> <span class="n">text</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_text</span> <span class="o">=</span> <span class="n">text</span>
      <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Axes2D.SpineHelper"><a class="viewcode-back" href="../toyplot.html#toyplot.Axes2D.SpineHelper">[docs]</a>  <span class="k">class</span> <span class="nc">SpineHelper</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_show</span> <span class="o">=</span> <span class="bp">True</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_position</span> <span class="o">=</span> <span class="s">&quot;low&quot;</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_style</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
      <span class="k">if</span> <span class="n">show</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_show</span> <span class="o">=</span> <span class="n">show</span>
      <span class="k">if</span> <span class="n">position</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_position</span> <span class="o">=</span> <span class="n">position</span>
      <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Axes2D.PerTickHelper"><a class="viewcode-back" href="../toyplot.html#toyplot.Axes2D.PerTickHelper">[docs]</a>  <span class="k">class</span> <span class="nc">PerTickHelper</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">defaultdict</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_values</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">defaultdict</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
      <span class="k">if</span> <span class="n">index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">tick</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
      <span class="k">elif</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">tick</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_values</span><span class="p">[</span><span class="n">value</span><span class="p">]</span>
      <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">new_style</span> <span class="o">=</span> <span class="n">tick</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;style&quot;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">new_style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
        <span class="n">tick</span><span class="p">[</span><span class="s">&quot;style&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_style</span>
<div class="viewcode-block" id="Axes2D.PerTickHelper.styles"><a class="viewcode-back" href="../toyplot.html#toyplot.Axes2D.PerTickHelper.styles">[docs]</a>    <span class="k">def</span> <span class="nf">styles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
      <span class="n">results</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;style&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="k">if</span> <span class="n">index</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span> <span class="k">else</span> <span class="bp">None</span> <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">))]</span>
      <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_values</span><span class="p">:</span>
        <span class="n">deltas</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">values</span> <span class="o">-</span> <span class="n">value</span><span class="p">)</span>
        <span class="n">results</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">argmin</span><span class="p">(</span><span class="n">deltas</span><span class="p">)]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_values</span><span class="p">[</span><span class="n">value</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;style&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
      <span class="k">return</span> <span class="n">results</span>
</div></div>
<div class="viewcode-block" id="Axes2D.TicksHelper"><a class="viewcode-back" href="../toyplot.html#toyplot.Axes2D.TicksHelper">[docs]</a>  <span class="k">class</span> <span class="nc">TicksHelper</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">locator</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_locator</span> <span class="o">=</span> <span class="n">locator</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_show</span> <span class="o">=</span> <span class="bp">False</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_length</span> <span class="o">=</span> <span class="n">length</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_style</span> <span class="o">=</span> <span class="p">{}</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">labels</span> <span class="o">=</span> <span class="n">Axes2D</span><span class="o">.</span><span class="n">TickLabelsHelper</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">tick</span> <span class="o">=</span> <span class="n">Axes2D</span><span class="o">.</span><span class="n">PerTickHelper</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">locator</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
      <span class="k">if</span> <span class="n">show</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_show</span> <span class="o">=</span> <span class="n">show</span>
      <span class="k">if</span> <span class="n">length</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_length</span> <span class="o">=</span> <span class="n">length</span>
      <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">locator</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_locator</span> <span class="o">=</span> <span class="n">locator</span>
</div>
<div class="viewcode-block" id="Axes2D.TickLabelsHelper"><a class="viewcode-back" href="../toyplot.html#toyplot.Axes2D.TickLabelsHelper">[docs]</a>  <span class="k">class</span> <span class="nc">TickLabelsHelper</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_show</span> <span class="o">=</span> <span class="bp">True</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_angle</span> <span class="o">=</span> <span class="n">angle</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_style</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;font-size&quot;</span><span class="p">:</span><span class="s">&quot;10px&quot;</span><span class="p">,</span> <span class="s">&quot;font-weight&quot;</span><span class="p">:</span><span class="s">&quot;normal&quot;</span><span class="p">,</span> <span class="s">&quot;stroke&quot;</span><span class="p">:</span><span class="s">&quot;none&quot;</span><span class="p">}</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">Axes2D</span><span class="o">.</span><span class="n">PerTickHelper</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">angle</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
      <span class="k">if</span> <span class="n">show</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_show</span> <span class="o">=</span> <span class="n">show</span>
      <span class="k">if</span> <span class="n">angle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_angle</span> <span class="o">=</span> <span class="n">angle</span>
      <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
</div>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xmin_range</span><span class="p">,</span> <span class="n">xmax_range</span><span class="p">,</span> <span class="n">ymin_range</span><span class="p">,</span> <span class="n">ymax_range</span><span class="p">,</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">show</span><span class="p">,</span> <span class="n">xshow</span><span class="p">,</span> <span class="n">yshow</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">xlabel</span><span class="p">,</span> <span class="n">ylabel</span><span class="p">,</span> <span class="n">xticklocator</span><span class="p">,</span> <span class="n">yticklocator</span><span class="p">,</span> <span class="n">xscale</span><span class="p">,</span> <span class="n">yscale</span><span class="p">,</span> <span class="n">palette</span><span class="p">,</span> <span class="n">padding</span><span class="p">,</span> <span class="n">tick_length</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_xmin_range</span> <span class="o">=</span> <span class="n">xmin_range</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_xmax_range</span> <span class="o">=</span> <span class="n">xmax_range</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ymin_range</span> <span class="o">=</span> <span class="n">ymin_range</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ymax_range</span> <span class="o">=</span> <span class="n">ymax_range</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_xmin_implicit</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_xmax_implicit</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ymin_implicit</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ymax_implicit</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_padding</span> <span class="o">=</span> <span class="n">padding</span>

    <span class="k">if</span> <span class="n">palette</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">palette</span> <span class="o">=</span> <span class="n">toyplot</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">Palette</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_palette</span> <span class="o">=</span> <span class="n">palette</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_bar_colors</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">cycle</span><span class="p">(</span><span class="n">palette</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_fill_colors</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">cycle</span><span class="p">(</span><span class="n">palette</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_plot_colors</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">cycle</span><span class="p">(</span><span class="n">palette</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_scatterplot_colors</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">cycle</span><span class="p">(</span><span class="n">palette</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_show</span> <span class="o">=</span> <span class="n">show</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">coordinates</span> <span class="o">=</span> <span class="n">Axes2D</span><span class="o">.</span><span class="n">CoordinatesHelper</span><span class="p">(</span><span class="n">show</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">xmin_range</span><span class="o">=</span><span class="n">xmax_range</span> <span class="o">-</span> <span class="mi">100</span><span class="p">,</span> <span class="n">xmax_range</span><span class="o">=</span><span class="n">xmax_range</span> <span class="o">-</span> <span class="mi">10</span><span class="p">,</span> <span class="n">ymin_range</span> <span class="o">=</span> <span class="n">ymin_range</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span> <span class="n">ymax_range</span> <span class="o">=</span> <span class="n">ymin_range</span> <span class="o">+</span> <span class="mi">24</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{})</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">Axes2D</span><span class="o">.</span><span class="n">LabelHelper</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s">&quot;font-size&quot;</span><span class="p">:</span><span class="s">&quot;14px&quot;</span><span class="p">,</span> <span class="s">&quot;baseline-shift&quot;</span><span class="p">:</span><span class="s">&quot;100%&quot;</span><span class="p">})</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">Axes2D</span><span class="o">.</span><span class="n">AxisHelper</span><span class="p">(</span><span class="n">show</span><span class="o">=</span><span class="n">xshow</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">xlabel</span><span class="p">,</span> <span class="n">label_style</span><span class="o">=</span><span class="p">{</span><span class="s">&quot;baseline-shift&quot;</span><span class="p">:</span><span class="s">&quot;-200%&quot;</span><span class="p">},</span> <span class="nb">min</span><span class="o">=</span><span class="n">xmin</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="n">xmax</span><span class="p">,</span> <span class="n">tick_length</span><span class="o">=</span><span class="n">tick_length</span><span class="p">,</span> <span class="n">tick_locator</span><span class="o">=</span><span class="n">xticklocator</span><span class="p">,</span> <span class="n">tick_angle</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">xscale</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">Axes2D</span><span class="o">.</span><span class="n">AxisHelper</span><span class="p">(</span><span class="n">show</span><span class="o">=</span><span class="n">yshow</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">ylabel</span><span class="p">,</span> <span class="n">label_style</span><span class="o">=</span><span class="p">{</span><span class="s">&quot;baseline-shift&quot;</span><span class="p">:</span><span class="s">&quot;200%&quot;</span><span class="p">},</span> <span class="nb">min</span><span class="o">=</span><span class="n">ymin</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="n">ymax</span><span class="p">,</span> <span class="n">tick_length</span><span class="o">=</span><span class="n">tick_length</span><span class="p">,</span> <span class="n">tick_locator</span><span class="o">=</span><span class="n">yticklocator</span><span class="p">,</span> <span class="n">tick_angle</span><span class="o">=-</span><span class="mi">90</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">yscale</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="o">=</span> <span class="nb">id</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_children</span> <span class="o">=</span> <span class="p">[]</span>

  <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">show</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_show</span> <span class="o">=</span> <span class="n">show</span>

  <span class="k">def</span> <span class="nf">_update_domain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_xmin_implicit</span> <span class="o">=</span> <span class="n">_null_min</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xmin_implicit</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_xmax_implicit</span> <span class="o">=</span> <span class="n">_null_max</span><span class="p">(</span><span class="n">xmax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xmax_implicit</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ymin_implicit</span> <span class="o">=</span> <span class="n">_null_min</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ymin_implicit</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ymax_implicit</span> <span class="o">=</span> <span class="n">_null_max</span><span class="p">(</span><span class="n">ymax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ymax_implicit</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">_finalize_domain</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c"># Begin with the implicit domain defined by our children.</span>
    <span class="n">xmin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xmin_implicit</span>
    <span class="n">xmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xmax_implicit</span>
    <span class="n">ymin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ymin_implicit</span>
    <span class="n">ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ymax_implicit</span>

    <span class="c"># If there is no implicit domain (we don&#39;t have any children), default to the origin.</span>
    <span class="k">if</span> <span class="n">xmin</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">xmin</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="n">xmax</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">xmax</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="n">ymin</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">ymin</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="n">ymax</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">ymax</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c"># Allow users to override the domain.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">_min</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">xmin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">_min</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">_max</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">xmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">_max</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">_min</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">ymin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">_min</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">_max</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">_max</span>

    <span class="c"># Ensure that the domain is never empty.</span>
    <span class="k">if</span> <span class="n">xmin</span> <span class="o">==</span> <span class="n">xmax</span><span class="p">:</span>
      <span class="n">xmin</span> <span class="o">-=</span> <span class="mf">0.5</span>
      <span class="n">xmax</span> <span class="o">+=</span> <span class="mf">0.5</span>

    <span class="k">if</span> <span class="n">ymin</span> <span class="o">==</span> <span class="n">ymax</span><span class="p">:</span>
      <span class="n">ymin</span> <span class="o">-=</span> <span class="mf">0.5</span>
      <span class="n">ymax</span> <span class="o">+=</span> <span class="mf">0.5</span>

    <span class="k">def</span> <span class="nf">get_locator</span><span class="p">(</span><span class="n">locator</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span> <span class="n">domain_min</span><span class="p">,</span> <span class="n">domain_max</span><span class="p">):</span>
      <span class="k">if</span> <span class="n">locator</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">locator</span>
      <span class="n">scale</span><span class="p">,</span> <span class="n">base</span> <span class="o">=</span> <span class="n">_get_scale</span><span class="p">(</span><span class="n">scale</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">scale</span> <span class="o">==</span> <span class="s">&quot;linear&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ExtendedTickLocator</span><span class="p">()</span>
      <span class="k">if</span> <span class="n">scale</span> <span class="o">==</span> <span class="s">&quot;log&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">domain_max</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
          <span class="k">return</span> <span class="n">NegativeLogTickLocator</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="n">base</span><span class="p">)</span>
        <span class="k">elif</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">domain_min</span><span class="p">:</span>
          <span class="k">return</span> <span class="n">PositiveLogTickLocator</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="n">base</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">SymmetricLogTickLocator</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="n">base</span><span class="p">)</span>

    <span class="c"># Calculate tick locations and labels.</span>
    <span class="n">xlocator</span> <span class="o">=</span> <span class="n">get_locator</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">ticks</span><span class="o">.</span><span class="n">_locator</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">_scale</span><span class="p">,</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">)</span>
    <span class="n">ylocator</span> <span class="o">=</span> <span class="n">get_locator</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">ticks</span><span class="o">.</span><span class="n">_locator</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">_scale</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_xtick_locations</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xtick_labels</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xtick_titles</span> <span class="o">=</span> <span class="n">xlocator</span><span class="o">.</span><span class="n">ticks</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ytick_locations</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ytick_labels</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ytick_titles</span> <span class="o">=</span> <span class="n">ylocator</span><span class="o">.</span><span class="n">ticks</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">)</span>

    <span class="c"># Allow tick locations to grow (never shrink) the domain.</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xtick_locations</span><span class="p">):</span>
      <span class="n">xmin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xtick_locations</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
      <span class="n">xmax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">xmax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xtick_locations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ytick_locations</span><span class="p">):</span>
      <span class="n">ymin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ytick_locations</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
      <span class="n">ymax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">ymax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ytick_locations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_xmin_computed</span> <span class="o">=</span> <span class="n">xmin</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_xmax_computed</span> <span class="o">=</span> <span class="n">xmax</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ymin_computed</span> <span class="o">=</span> <span class="n">ymin</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ymax_computed</span> <span class="o">=</span> <span class="n">ymax</span>

    <span class="k">def</span> <span class="nf">x_linear_projection</span><span class="p">(</span><span class="n">domain_min</span><span class="p">,</span> <span class="n">domain_max</span><span class="p">,</span> <span class="n">range_min</span><span class="p">,</span> <span class="n">range_max</span><span class="p">):</span>
      <span class="k">def</span> <span class="nf">implementation</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">domain_min</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">domain_max</span> <span class="o">-</span> <span class="n">domain_min</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">range_max</span> <span class="o">-</span> <span class="n">range_min</span><span class="p">)</span> <span class="o">+</span> <span class="n">range_min</span>
      <span class="k">return</span> <span class="n">implementation</span>

    <span class="k">def</span> <span class="nf">x_log_projection</span><span class="p">(</span><span class="n">domain_min</span><span class="p">,</span> <span class="n">domain_max</span><span class="p">,</span> <span class="n">range_min</span><span class="p">,</span> <span class="n">range_max</span><span class="p">,</span> <span class="n">base</span><span class="p">):</span>
      <span class="k">def</span> <span class="nf">implementation</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">_signed_log</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span> <span class="o">-</span> <span class="n">_signed_log</span><span class="p">(</span><span class="n">domain_min</span><span class="p">,</span> <span class="n">base</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="n">_signed_log</span><span class="p">(</span><span class="n">domain_max</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span> <span class="o">-</span> <span class="n">_signed_log</span><span class="p">(</span><span class="n">domain_min</span><span class="p">,</span> <span class="n">base</span><span class="p">))</span> <span class="o">*</span> <span class="p">(</span><span class="n">range_max</span> <span class="o">-</span> <span class="n">range_min</span><span class="p">)</span> <span class="o">+</span> <span class="n">range_min</span>
      <span class="k">return</span> <span class="n">implementation</span>

    <span class="k">def</span> <span class="nf">x_symlog_projection</span><span class="p">(</span><span class="n">domain_min</span><span class="p">,</span> <span class="n">domain_max</span><span class="p">,</span> <span class="n">range_min</span><span class="p">,</span> <span class="n">range_max</span><span class="p">,</span> <span class="n">base</span><span class="p">):</span>
      <span class="k">def</span> <span class="nf">implementation</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">_symmetric_log</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span> <span class="o">-</span> <span class="n">_symmetric_log</span><span class="p">(</span><span class="n">domain_min</span><span class="p">,</span> <span class="n">base</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="n">_symmetric_log</span><span class="p">(</span><span class="n">domain_max</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span> <span class="o">-</span> <span class="n">_symmetric_log</span><span class="p">(</span><span class="n">domain_min</span><span class="p">,</span> <span class="n">base</span><span class="p">))</span> <span class="o">*</span> <span class="p">(</span><span class="n">range_max</span> <span class="o">-</span> <span class="n">range_min</span><span class="p">)</span> <span class="o">+</span> <span class="n">range_min</span>
      <span class="k">return</span> <span class="n">implementation</span>

    <span class="k">def</span> <span class="nf">y_linear_projection</span><span class="p">(</span><span class="n">domain_min</span><span class="p">,</span> <span class="n">domain_max</span><span class="p">,</span> <span class="n">range_min</span><span class="p">,</span> <span class="n">range_max</span><span class="p">):</span>
      <span class="k">def</span> <span class="nf">implementation</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="p">((</span><span class="n">x</span> <span class="o">-</span> <span class="n">domain_min</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">domain_max</span> <span class="o">-</span> <span class="n">domain_min</span><span class="p">)))</span> <span class="o">*</span> <span class="p">(</span><span class="n">range_max</span> <span class="o">-</span> <span class="n">range_min</span><span class="p">)</span> <span class="o">+</span> <span class="n">range_min</span>
      <span class="k">return</span> <span class="n">implementation</span>

    <span class="k">def</span> <span class="nf">y_log_projection</span><span class="p">(</span><span class="n">domain_min</span><span class="p">,</span> <span class="n">domain_max</span><span class="p">,</span> <span class="n">range_min</span><span class="p">,</span> <span class="n">range_max</span><span class="p">,</span> <span class="n">base</span><span class="p">):</span>
      <span class="k">def</span> <span class="nf">implementation</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="p">((</span><span class="n">_signed_log</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span> <span class="o">-</span> <span class="n">_signed_log</span><span class="p">(</span><span class="n">domain_min</span><span class="p">,</span> <span class="n">base</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="n">_signed_log</span><span class="p">(</span><span class="n">domain_max</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span> <span class="o">-</span> <span class="n">_signed_log</span><span class="p">(</span><span class="n">domain_min</span><span class="p">,</span> <span class="n">base</span><span class="p">))))</span> <span class="o">*</span> <span class="p">(</span><span class="n">range_max</span> <span class="o">-</span> <span class="n">range_min</span><span class="p">)</span> <span class="o">+</span> <span class="n">range_min</span>
      <span class="k">return</span> <span class="n">implementation</span>

    <span class="k">def</span> <span class="nf">y_symlog_projection</span><span class="p">(</span><span class="n">domain_min</span><span class="p">,</span> <span class="n">domain_max</span><span class="p">,</span> <span class="n">range_min</span><span class="p">,</span> <span class="n">range_max</span><span class="p">,</span> <span class="n">base</span><span class="p">):</span>
      <span class="k">def</span> <span class="nf">implementation</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="p">((</span><span class="n">_symmetric_log</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span> <span class="o">-</span> <span class="n">_symmetric_log</span><span class="p">(</span><span class="n">domain_min</span><span class="p">,</span> <span class="n">base</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="n">_symmetric_log</span><span class="p">(</span><span class="n">domain_max</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span> <span class="o">-</span> <span class="n">_symmetric_log</span><span class="p">(</span><span class="n">domain_min</span><span class="p">,</span> <span class="n">base</span><span class="p">))))</span> <span class="o">*</span> <span class="p">(</span><span class="n">range_max</span> <span class="o">-</span> <span class="n">range_min</span><span class="p">)</span> <span class="o">+</span> <span class="n">range_min</span>
      <span class="k">return</span> <span class="n">implementation</span>

    <span class="n">scale</span><span class="p">,</span> <span class="n">base</span> <span class="o">=</span> <span class="n">_get_scale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">_scale</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">scale</span> <span class="o">==</span> <span class="s">&quot;linear&quot;</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_xprojection</span> <span class="o">=</span> <span class="n">x_linear_projection</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xmin_range</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_padding</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xmax_range</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_padding</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">scale</span> <span class="o">==</span> <span class="s">&quot;log&quot;</span><span class="p">:</span>
      <span class="k">if</span> <span class="n">xmax</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">xmin</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xprojection</span> <span class="o">=</span> <span class="n">x_log_projection</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xmin_range</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_padding</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xmax_range</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_padding</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xprojection</span> <span class="o">=</span> <span class="n">x_symlog_projection</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xmin_range</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_padding</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xmax_range</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_padding</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span>

    <span class="n">scale</span><span class="p">,</span> <span class="n">base</span> <span class="o">=</span> <span class="n">_get_scale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">_scale</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">scale</span> <span class="o">==</span> <span class="s">&quot;linear&quot;</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_yprojection</span> <span class="o">=</span> <span class="n">y_linear_projection</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ymin_range</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_padding</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ymax_range</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_padding</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">scale</span> <span class="o">==</span> <span class="s">&quot;log&quot;</span><span class="p">:</span>
      <span class="k">if</span> <span class="n">ymax</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">ymin</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_yprojection</span> <span class="o">=</span> <span class="n">y_log_projection</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ymin_range</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_padding</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ymax_range</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_padding</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_yprojection</span> <span class="o">=</span> <span class="n">y_symlog_projection</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ymin_range</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_padding</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ymax_range</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_padding</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">_project_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xprojection</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">_project_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_yprojection</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

<div class="viewcode-block" id="Axes2D.bars"><a class="viewcode-back" href="../toyplot.html#toyplot.Axes2D.bars">[docs]</a>  <span class="k">def</span> <span class="nf">bars</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">along</span><span class="o">=</span><span class="s">&quot;x&quot;</span><span class="p">,</span> <span class="n">baseline</span><span class="o">=</span><span class="s">&quot;stacked&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{},</span> <span class="nb">id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Add traditional vertical bar(s) to the axes.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    a, b, c : array-like sets of coordinates</span>
<span class="sd">      If `a`, `b`, and `c` are provided, they specify the bar X coordinates,</span>
<span class="sd">      bottom coordinates, and top coordinates respectively.  If only `a` and</span>
<span class="sd">      `b` are provided, they specify the bar X coordinates and top coordinates,</span>
<span class="sd">      with the bottom of each bar on the origin.  If only `a` is provided, it</span>
<span class="sd">      either specifies the top of each bar, with the bottoms on the origin and the X</span>
<span class="sd">      coordinates ranging from [0, N), or a tuple containing bar heights and bar edges.</span>
<span class="sd">      Note that this latter behavior allows you to pass the results from numpy.histogram()</span>
<span class="sd">      directly to this function.</span>
<span class="sd">    fill : array-like set of colors, optional</span>
<span class="sd">      Specify a single color for all the bars, one color per bar, or a per-bar</span>
<span class="sd">      scalar value to be mapped to a color using the `palette` parameter.</span>
<span class="sd">    palette : :class:`toyplot.color.Palette`, optional</span>
<span class="sd">      Palette to be used for mapping scalar `fill` values to colors.  If</span>
<span class="sd">      unspecified, a default palette is used.</span>
<span class="sd">    opacity : array-like set of opacities, optional</span>
<span class="sd">      Specify a single opacity for all the bars, or one opacity per bar.</span>
<span class="sd">    width : array-like set of bar widths, optional</span>
<span class="sd">      Specify a single width or collection of bar widths.  Note: when grouping bars</span>
<span class="sd">      with :meth:`toyplot.BarMagnitudesMark.group`, this value will control the width of each</span>
<span class="sd">      group of bars.</span>
<span class="sd">    style : dict, optional</span>
<span class="sd">      Collection of CSS styles to apply to the mark.  See</span>
<span class="sd">      :class:`toyplot.BarMagnitudesMark` for a list of useful styles.</span>
<span class="sd">    id : string, optional</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    bars : :class:`toyplot.BarMagnitudesMark`</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">baseline</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
      <span class="k">if</span> <span class="n">a</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">b</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">c</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">position</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">width</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">position</span><span class="p">))</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">position</span><span class="p">))</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">position</span><span class="p">))</span>
        <span class="n">series</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">))</span>
      <span class="k">elif</span> <span class="n">a</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">b</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s">&quot;float64&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
          <span class="n">b</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
          <span class="n">series</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
          <span class="n">position</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
          <span class="n">width</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">b</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
          <span class="n">series</span> <span class="o">=</span> <span class="n">_require_scalar_matrix</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
          <span class="n">position</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
          <span class="n">width</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s">&quot;float64&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
          <span class="n">a</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
          <span class="n">b</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
          <span class="n">series</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">))</span>
          <span class="n">position</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
          <span class="n">width</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
        <span class="k">elif</span> <span class="n">a</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
          <span class="n">series</span> <span class="o">=</span> <span class="n">_require_scalar_matrix</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
          <span class="n">position</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
          <span class="n">width</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>

      <span class="n">default_color</span> <span class="o">=</span> <span class="p">[</span><span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_bar_colors</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span>
      <span class="n">fill</span> <span class="o">=</span> <span class="n">toyplot</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">_broadcast_color</span><span class="p">(</span><span class="n">default_color</span> <span class="k">if</span> <span class="n">fill</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">fill</span><span class="p">,</span> <span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">palette</span><span class="o">=</span><span class="n">palette</span><span class="p">)</span>
      <span class="n">opacity</span> <span class="o">=</span> <span class="n">_broadcast_scalar</span><span class="p">(</span><span class="n">opacity</span><span class="p">,</span> <span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
      <span class="n">title</span> <span class="o">=</span> <span class="n">_broadcast_object</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
      <span class="n">style</span> <span class="o">=</span> <span class="n">_require_style</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
      <span class="nb">id</span> <span class="o">=</span> <span class="n">_require_optional_id</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>

      <span class="n">computed_style</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;stroke&quot;</span><span class="p">:</span><span class="s">&quot;none&quot;</span><span class="p">}</span>
      <span class="n">computed_style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>

      <span class="k">if</span> <span class="n">along</span> <span class="o">==</span> <span class="s">&quot;x&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_domain</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">position</span> <span class="o">-</span> <span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">position</span> <span class="o">+</span> <span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">series</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">series</span><span class="p">))</span>
      <span class="k">elif</span> <span class="n">along</span> <span class="o">==</span> <span class="s">&quot;y&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_domain</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">series</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">series</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">position</span> <span class="o">-</span> <span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">position</span> <span class="o">+</span> <span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>

      <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">BarBoundariesMark</span><span class="p">(</span><span class="n">along</span><span class="o">=</span><span class="n">along</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">series</span><span class="o">=</span><span class="n">series</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">fill</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">))</span>
      <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span> <span class="c"># baseline is not None</span>
      <span class="k">if</span> <span class="n">a</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">b</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">position</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">width</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">position</span><span class="p">))</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s">&quot;float64&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
          <span class="n">b</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">position</span><span class="p">))</span>
          <span class="n">series</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">b</span><span class="p">,))</span>
        <span class="k">elif</span> <span class="n">b</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
          <span class="n">series</span> <span class="o">=</span> <span class="n">_require_scalar_matrix</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">position</span><span class="p">))</span>
      <span class="k">elif</span> <span class="n">a</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
          <span class="n">counts</span><span class="p">,</span> <span class="n">edges</span> <span class="o">=</span> <span class="n">a</span>
          <span class="n">position</span> <span class="o">=</span> <span class="p">(</span><span class="n">edges</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">edges</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span> <span class="o">/</span> <span class="mi">2</span>
          <span class="n">width</span> <span class="o">=</span> <span class="p">(</span><span class="n">edges</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">-</span> <span class="n">edges</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">*</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">position</span><span class="p">))</span>
          <span class="n">series</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">counts</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">position</span><span class="p">)),))</span>
        <span class="k">else</span><span class="p">:</span>
          <span class="n">a</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s">&quot;float64&quot;</span><span class="p">)</span>
          <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">series</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">a</span><span class="p">,))</span>
          <span class="k">elif</span> <span class="n">a</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">series</span> <span class="o">=</span> <span class="n">a</span>
          <span class="n">position</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
          <span class="n">width</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

      <span class="n">default_color</span> <span class="o">=</span> <span class="p">[</span><span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_bar_colors</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span>
      <span class="n">fill</span> <span class="o">=</span> <span class="n">toyplot</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">_broadcast_color</span><span class="p">(</span><span class="n">default_color</span> <span class="k">if</span> <span class="n">fill</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">fill</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">palette</span><span class="p">)</span>
      <span class="n">opacity</span> <span class="o">=</span> <span class="n">_broadcast_scalar</span><span class="p">(</span><span class="n">opacity</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
      <span class="n">title</span> <span class="o">=</span> <span class="n">_broadcast_object</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
      <span class="n">style</span> <span class="o">=</span> <span class="n">_require_style</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
      <span class="nb">id</span> <span class="o">=</span> <span class="n">_require_optional_id</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>

      <span class="k">if</span> <span class="n">baseline</span> <span class="o">==</span> <span class="s">&quot;stacked&quot;</span><span class="p">:</span>
        <span class="n">baseline</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
      <span class="k">elif</span> <span class="n">baseline</span> <span class="o">==</span> <span class="s">&quot;symmetric&quot;</span><span class="p">:</span>
        <span class="n">baseline</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">numpy</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">series</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
      <span class="k">elif</span> <span class="n">baseline</span> <span class="o">==</span> <span class="s">&quot;wiggle&quot;</span><span class="p">:</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">baseline</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
          <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
            <span class="n">baseline</span> <span class="o">+=</span> <span class="n">series</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
        <span class="n">baseline</span> <span class="o">*=</span> <span class="o">-</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>

      <span class="n">boundaries</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">baseline</span><span class="p">,</span> <span class="n">series</span><span class="p">)),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">along</span> <span class="o">==</span> <span class="s">&quot;x&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_domain</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">position</span> <span class="o">-</span> <span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">position</span> <span class="o">+</span> <span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">boundaries</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">boundaries</span><span class="p">))</span>
      <span class="k">elif</span> <span class="n">along</span> <span class="o">==</span> <span class="s">&quot;y&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_domain</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">boundaries</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">boundaries</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">position</span> <span class="o">-</span> <span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">position</span> <span class="o">+</span> <span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>

      <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">BarMagnitudesMark</span><span class="p">(</span><span class="n">along</span><span class="o">=</span><span class="n">along</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">baseline</span><span class="o">=</span><span class="n">baseline</span><span class="p">,</span> <span class="n">series</span><span class="o">=</span><span class="n">series</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">fill</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">))</span>
      <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Axes2D.colorbar"><a class="viewcode-back" href="../toyplot.html#toyplot.Axes2D.colorbar">[docs]</a>  <span class="k">def</span> <span class="nf">colorbar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">tick_length</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">tick_locator</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{}):</span>
    <span class="k">if</span> <span class="n">palette</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">palette</span> <span class="o">=</span> <span class="n">toyplot</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">brewer</span><span class="p">(</span><span class="s">&quot;BuGn&quot;</span><span class="p">)</span>
    <span class="n">style</span> <span class="o">=</span> <span class="n">_require_style</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>

    <span class="n">mark</span> <span class="o">=</span> <span class="n">VColorBarMark</span><span class="p">(</span><span class="n">xmin_range</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_xmax_range</span> <span class="o">+</span> <span class="n">offset</span><span class="p">,</span> <span class="n">xmax_range</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_xmax_range</span> <span class="o">+</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">width</span><span class="p">,</span> <span class="n">ymin_range</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_ymin_range</span><span class="p">,</span> <span class="n">ymax_range</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_ymax_range</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">palette</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_padding</span><span class="p">,</span> <span class="n">tick_length</span><span class="o">=</span><span class="n">tick_length</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="nb">min</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="nb">max</span><span class="p">,</span> <span class="n">tick_locator</span><span class="o">=</span><span class="n">tick_locator</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">values</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">mark</span><span class="o">.</span><span class="n">_update_domain</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">values</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">values</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mark</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">mark</span>
</div>
<div class="viewcode-block" id="Axes2D.fill"><a class="viewcode-back" href="../toyplot.html#toyplot.Axes2D.fill">[docs]</a>  <span class="k">def</span> <span class="nf">fill</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">along</span><span class="o">=</span><span class="s">&quot;x&quot;</span><span class="p">,</span> <span class="n">baseline</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{},</span> <span class="nb">id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Fill the region between two curves on the axes.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    a, b, c : array-like sets of coordinates</span>
<span class="sd">      If `a`, `b`, and `c` are provided, they specify the X coordinates, bottom</span>
<span class="sd">      coordinates, and top coordinates of the region respectively.  If only `a`</span>
<span class="sd">      and `b` are provided, they specify the top coordinates and bottom</span>
<span class="sd">      coordinates, with the X coordinates ranging from [0, N).  If only `a` is</span>
<span class="sd">      provided, it specifies the top of the region, with the bottom along the</span>
<span class="sd">      origin and the X coordinates ranging from [0, N).</span>
<span class="sd">    title : string, optional</span>
<span class="sd">      Human-readable title for the mark.  The SVG / HTML backends render the</span>
<span class="sd">      title as a tooltip.</span>
<span class="sd">    style : dict, optional</span>
<span class="sd">      Collection of CSS styles to apply to the mark.  See</span>
<span class="sd">      :class:`toyplot.FillBoundariesMark` for a list of useful styles.</span>
<span class="sd">    id : string, optional</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    mark : :class:`toyplot.FillBoundariesMark` or :class:`toyplot.FillMagnitudesMark`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">baseline</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
      <span class="k">if</span> <span class="n">a</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">b</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">c</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">position</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">position</span><span class="p">))</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">position</span><span class="p">))</span>
        <span class="n">series</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">))</span>
      <span class="k">elif</span> <span class="n">a</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">b</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s">&quot;float64&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
          <span class="n">b</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
          <span class="n">series</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
          <span class="n">position</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">b</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
          <span class="n">series</span> <span class="o">=</span> <span class="n">_require_scalar_matrix</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
          <span class="n">position</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s">&quot;float64&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
          <span class="n">a</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
          <span class="n">b</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
          <span class="n">series</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">))</span>
          <span class="n">position</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">a</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
          <span class="n">series</span> <span class="o">=</span> <span class="n">_require_scalar_matrix</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
          <span class="n">position</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

      <span class="n">default_color</span> <span class="o">=</span> <span class="p">[</span><span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_fill_colors</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span>
      <span class="n">fill</span> <span class="o">=</span> <span class="n">toyplot</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">_broadcast_color</span><span class="p">(</span><span class="n">default_color</span> <span class="k">if</span> <span class="n">fill</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">fill</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">palette</span><span class="p">)</span>
      <span class="n">opacity</span> <span class="o">=</span> <span class="n">_broadcast_scalar</span><span class="p">(</span><span class="n">opacity</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
      <span class="n">title</span> <span class="o">=</span> <span class="n">_broadcast_object</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
      <span class="n">style</span> <span class="o">=</span> <span class="n">_require_style</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
      <span class="nb">id</span> <span class="o">=</span> <span class="n">_require_optional_id</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>

      <span class="n">computed_style</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;stroke&quot;</span><span class="p">:</span><span class="s">&quot;none&quot;</span><span class="p">}</span>
      <span class="n">computed_style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>

      <span class="k">if</span> <span class="n">along</span> <span class="o">==</span> <span class="s">&quot;x&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_domain</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">position</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">position</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">series</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">series</span><span class="p">))</span>
      <span class="k">elif</span> <span class="n">along</span> <span class="o">==</span> <span class="s">&quot;y&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_domain</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">series</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">series</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">position</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">position</span><span class="p">))</span>

      <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">FillBoundariesMark</span><span class="p">(</span><span class="n">along</span><span class="o">=</span><span class="n">along</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="n">series</span><span class="o">=</span><span class="n">series</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">fill</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">computed_style</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">))</span>
      <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span> <span class="c"># baseline is not None</span>
      <span class="k">if</span> <span class="n">a</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">b</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">series</span> <span class="o">=</span> <span class="n">_require_scalar_matrix</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="n">position</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="n">series</span> <span class="o">=</span> <span class="n">_require_scalar_matrix</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">position</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

      <span class="n">default_color</span> <span class="o">=</span> <span class="p">[</span><span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_fill_colors</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span>
      <span class="n">fill</span> <span class="o">=</span> <span class="n">toyplot</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">_broadcast_color</span><span class="p">(</span><span class="n">default_color</span> <span class="k">if</span> <span class="n">fill</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">fill</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">palette</span><span class="o">=</span><span class="n">palette</span><span class="p">)</span>
      <span class="n">opacity</span> <span class="o">=</span> <span class="n">_broadcast_scalar</span><span class="p">(</span><span class="n">opacity</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
      <span class="n">title</span> <span class="o">=</span> <span class="n">_broadcast_object</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
      <span class="n">style</span> <span class="o">=</span> <span class="n">_require_style</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
      <span class="nb">id</span> <span class="o">=</span> <span class="n">_require_optional_id</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>

      <span class="n">computed_style</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;stroke&quot;</span><span class="p">:</span><span class="s">&quot;none&quot;</span><span class="p">}</span>
      <span class="n">computed_style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>

      <span class="k">if</span> <span class="n">baseline</span> <span class="o">==</span> <span class="s">&quot;stacked&quot;</span><span class="p">:</span>
        <span class="n">baseline</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
      <span class="k">elif</span> <span class="n">baseline</span> <span class="o">==</span> <span class="s">&quot;symmetric&quot;</span><span class="p">:</span>
        <span class="n">baseline</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">numpy</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">series</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
      <span class="k">elif</span> <span class="n">baseline</span> <span class="o">==</span> <span class="s">&quot;wiggle&quot;</span><span class="p">:</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">baseline</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
          <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
            <span class="n">baseline</span> <span class="o">+=</span> <span class="n">series</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
        <span class="n">baseline</span> <span class="o">*=</span> <span class="o">-</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>

      <span class="n">boundaries</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">baseline</span><span class="p">,</span> <span class="n">series</span><span class="p">)),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">along</span> <span class="o">==</span> <span class="s">&quot;x&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_domain</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">position</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">position</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">boundaries</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">boundaries</span><span class="p">))</span>
      <span class="k">elif</span> <span class="n">along</span> <span class="o">==</span> <span class="s">&quot;y&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_domain</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">boundaries</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">boundaries</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">position</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">position</span><span class="p">))</span>

      <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">FillMagnitudesMark</span><span class="p">(</span><span class="n">along</span><span class="o">=</span><span class="n">along</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="n">baseline</span><span class="o">=</span><span class="n">baseline</span><span class="p">,</span> <span class="n">series</span><span class="o">=</span><span class="n">series</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">fill</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">computed_style</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">))</span>
      <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Axes2D.plot"><a class="viewcode-back" href="../toyplot.html#toyplot.Axes2D.plot">[docs]</a>  <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">along</span><span class="o">=</span><span class="s">&quot;x&quot;</span><span class="p">,</span> <span class="n">stroke</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">stroke_width</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">stroke_opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fill_palette</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{},</span> <span class="n">mstyle</span><span class="o">=</span><span class="p">{},</span> <span class="n">mlstyle</span><span class="o">=</span><span class="p">{},</span> <span class="nb">id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Add a bivariate plot to the axes.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    a, b : array-like sets of coordinates</span>
<span class="sd">      If `a` and `b` are provided, they specify the X coordinates and Y</span>
<span class="sd">      coordinates of each point in the plot.  If only `a` is provided, it</span>
<span class="sd">      specifies the Y coordinates, and the X coordinates will range from [0, N).</span>
<span class="sd">    title : string, optional</span>
<span class="sd">      Human-readable title for the mark.  The SVG / HTML backends render the</span>
<span class="sd">      title as a tooltip.</span>
<span class="sd">    style : dict, optional</span>
<span class="sd">      Collection of CSS styles to apply across all datums.  See</span>
<span class="sd">      :class:`toyplot.PlotMark` for a list of useful styles.</span>
<span class="sd">    id : string, optional</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    plot : :class:`toyplot.PlotMark`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">a</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">b</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">position</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
      <span class="n">b</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s">&quot;float64&quot;</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">position</span><span class="p">))</span>
        <span class="n">series</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">b</span><span class="p">,))</span>
      <span class="k">elif</span> <span class="n">b</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">series</span> <span class="o">=</span> <span class="n">_require_scalar_matrix</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">position</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">a</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s">&quot;float64&quot;</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">series</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">a</span><span class="p">,))</span>
        <span class="n">position</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
      <span class="k">elif</span> <span class="n">a</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">series</span> <span class="o">=</span> <span class="n">a</span>
        <span class="n">position</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="n">default_color</span> <span class="o">=</span> <span class="p">[</span><span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_plot_colors</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span>
    <span class="n">stroke</span> <span class="o">=</span> <span class="n">toyplot</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">_broadcast_color</span><span class="p">(</span><span class="n">default_color</span> <span class="k">if</span> <span class="n">stroke</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">stroke</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">palette</span><span class="o">=</span><span class="n">palette</span><span class="p">)</span>
    <span class="n">stroke_width</span> <span class="o">=</span> <span class="n">_broadcast_scalar</span><span class="p">(</span><span class="n">stroke_width</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">stroke_opacity</span> <span class="o">=</span> <span class="n">_broadcast_scalar</span><span class="p">(</span><span class="n">stroke_opacity</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">marker</span> <span class="o">=</span> <span class="n">_broadcast_object</span><span class="p">(</span><span class="n">marker</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
    <span class="n">size</span> <span class="o">=</span> <span class="n">_broadcast_scalar</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
    <span class="n">fill</span> <span class="o">=</span> <span class="n">toyplot</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">_broadcast_color</span><span class="p">(</span><span class="n">default_color</span> <span class="k">if</span> <span class="n">fill</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">fill</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">fill_palette</span><span class="p">)</span>
    <span class="n">opacity</span> <span class="o">=</span> <span class="n">_broadcast_scalar</span><span class="p">(</span><span class="n">opacity</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">_broadcast_object</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">style</span> <span class="o">=</span> <span class="n">_require_style</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
    <span class="n">mstyle</span> <span class="o">=</span> <span class="n">_require_style</span><span class="p">(</span><span class="n">mstyle</span><span class="p">)</span>
    <span class="n">mlstyle</span> <span class="o">=</span> <span class="n">_require_style</span><span class="p">(</span><span class="n">mlstyle</span><span class="p">)</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">_require_optional_id</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>

    <span class="n">computed_style</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;fill&quot;</span><span class="p">:</span><span class="s">&quot;none&quot;</span><span class="p">}</span>
    <span class="n">computed_style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">along</span> <span class="o">==</span> <span class="s">&quot;x&quot;</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_update_domain</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">position</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">position</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">series</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">series</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">along</span> <span class="o">==</span> <span class="s">&quot;y&quot;</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_update_domain</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">series</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">series</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">position</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">position</span><span class="p">))</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">PlotMark</span><span class="p">(</span><span class="n">along</span><span class="o">=</span><span class="n">along</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="n">series</span><span class="o">=</span><span class="n">series</span><span class="p">,</span> <span class="n">stroke</span><span class="o">=</span><span class="n">stroke</span><span class="p">,</span> <span class="n">stroke_width</span><span class="o">=</span><span class="n">stroke_width</span><span class="p">,</span> <span class="n">stroke_opacity</span><span class="o">=</span><span class="n">stroke_opacity</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="n">marker</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">fill</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">computed_style</span><span class="p">,</span> <span class="n">mstyle</span><span class="o">=</span><span class="n">mstyle</span><span class="p">,</span> <span class="n">mlstyle</span><span class="o">=</span><span class="n">mlstyle</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Axes2D.scatterplot"><a class="viewcode-back" href="../toyplot.html#toyplot.Axes2D.scatterplot">[docs]</a>  <span class="k">def</span> <span class="nf">scatterplot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">along</span><span class="o">=</span><span class="s">&quot;x&quot;</span><span class="p">,</span> <span class="n">stroke</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">stroke_width</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">stroke_opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s">&quot;o&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fill_palette</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s">&quot;stroke&quot;</span><span class="p">:</span><span class="s">&quot;none&quot;</span><span class="p">},</span> <span class="n">mstyle</span><span class="o">=</span><span class="p">{},</span> <span class="n">mlstyle</span><span class="o">=</span><span class="p">{},</span> <span class="nb">id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Add a bivariate plot to the axes.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    a, b : array-like sets of coordinates</span>
<span class="sd">      If `a` and `b` are provided, they specify the X coordinates and Y</span>
<span class="sd">      coordinates of each point in the plot.  If only `a` is provided, it</span>
<span class="sd">      specifies the Y coordinates, and the X coordinates will range from [0, N).</span>
<span class="sd">    title : string, optional</span>
<span class="sd">      Human-readable title for the mark.  The SVG / HTML backends render the</span>
<span class="sd">      title as a tooltip.</span>
<span class="sd">    style : dict, optional</span>
<span class="sd">      Collection of CSS styles to apply across all datums.  See</span>
<span class="sd">      :class:`toyplot.PlotMark` for a list of useful styles.</span>
<span class="sd">    id : string, optional</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    plot : :class:`toyplot.PlotMark`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">a</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">b</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">position</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
      <span class="n">b</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s">&quot;float64&quot;</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">position</span><span class="p">))</span>
        <span class="n">series</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">b</span><span class="p">,))</span>
      <span class="k">elif</span> <span class="n">b</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">series</span> <span class="o">=</span> <span class="n">_require_scalar_matrix</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">position</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">a</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s">&quot;float64&quot;</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">series</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">a</span><span class="p">,))</span>
        <span class="n">position</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
      <span class="k">elif</span> <span class="n">a</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">series</span> <span class="o">=</span> <span class="n">a</span>
        <span class="n">position</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="n">default_color</span> <span class="o">=</span> <span class="p">[</span><span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_scatterplot_colors</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span>
    <span class="n">stroke</span> <span class="o">=</span> <span class="n">toyplot</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">_broadcast_color</span><span class="p">(</span><span class="n">default_color</span> <span class="k">if</span> <span class="n">stroke</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">stroke</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">palette</span><span class="o">=</span><span class="n">palette</span><span class="p">)</span>
    <span class="n">stroke_width</span> <span class="o">=</span> <span class="n">_broadcast_scalar</span><span class="p">(</span><span class="n">stroke_width</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">stroke_opacity</span> <span class="o">=</span> <span class="n">_broadcast_scalar</span><span class="p">(</span><span class="n">stroke_opacity</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">marker</span> <span class="o">=</span> <span class="n">_broadcast_object</span><span class="p">(</span><span class="n">marker</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
    <span class="n">size</span> <span class="o">=</span> <span class="n">_broadcast_scalar</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
    <span class="n">fill</span> <span class="o">=</span> <span class="n">toyplot</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">_broadcast_color</span><span class="p">(</span><span class="n">default_color</span> <span class="k">if</span> <span class="n">fill</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">fill</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">fill_palette</span><span class="p">)</span>
    <span class="n">opacity</span> <span class="o">=</span> <span class="n">_broadcast_scalar</span><span class="p">(</span><span class="n">opacity</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">_broadcast_object</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">series</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">style</span> <span class="o">=</span> <span class="n">_require_style</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
    <span class="n">mstyle</span> <span class="o">=</span> <span class="n">_require_style</span><span class="p">(</span><span class="n">mstyle</span><span class="p">)</span>
    <span class="n">mlstyle</span> <span class="o">=</span> <span class="n">_require_style</span><span class="p">(</span><span class="n">mlstyle</span><span class="p">)</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">_require_optional_id</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>

    <span class="n">computed_style</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;fill&quot;</span><span class="p">:</span><span class="s">&quot;none&quot;</span><span class="p">}</span>
    <span class="n">computed_style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">along</span> <span class="o">==</span> <span class="s">&quot;x&quot;</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_update_domain</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">position</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">position</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">series</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">series</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">along</span> <span class="o">==</span> <span class="s">&quot;y&quot;</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_update_domain</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">series</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">series</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">position</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">position</span><span class="p">))</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">PlotMark</span><span class="p">(</span><span class="n">along</span><span class="o">=</span><span class="n">along</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="n">series</span><span class="o">=</span><span class="n">series</span><span class="p">,</span> <span class="n">stroke</span><span class="o">=</span><span class="n">stroke</span><span class="p">,</span> <span class="n">stroke_width</span><span class="o">=</span><span class="n">stroke_width</span><span class="p">,</span> <span class="n">stroke_opacity</span><span class="o">=</span><span class="n">stroke_opacity</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="n">marker</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">fill</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">computed_style</span><span class="p">,</span> <span class="n">mstyle</span><span class="o">=</span><span class="n">mstyle</span><span class="p">,</span> <span class="n">mlstyle</span><span class="o">=</span><span class="n">mlstyle</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>









</div>
<div class="viewcode-block" id="Axes2D.hlines"><a class="viewcode-back" href="../toyplot.html#toyplot.Axes2D.hlines">[docs]</a>  <span class="k">def</span> <span class="nf">hlines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{},</span> <span class="nb">id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Add horizontal line(s) to the axes.</span>

<span class="sd">    Horizontal lines are convenient because they&#39;re guaranteed to fill the axes from</span>
<span class="sd">    left to right regardless of the axes size.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    y : array-like set of Y coordinates</span>
<span class="sd">      One horizontal line will be drawn through each Y coordinate provided.</span>
<span class="sd">    title : string, optional</span>
<span class="sd">      Human-readable title for the mark.  The SVG / HTML backends render the</span>
<span class="sd">      title as a tooltip.</span>
<span class="sd">    style : dict, optional</span>
<span class="sd">      Collection of CSS styles to apply to the mark.  See</span>
<span class="sd">      :class:`toyplot.HLinesMark` for a list of useful styles.</span>
<span class="sd">    id : string, optional</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    hlines : :class:`toyplot.HLinesMark`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">_require_optional_string</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="n">style</span> <span class="o">=</span> <span class="n">_require_style</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">_require_optional_id</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_update_domain</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">y</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">HLinesMark</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="nb">id</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Axes2D.legend"><a class="viewcode-back" href="../toyplot.html#toyplot.Axes2D.legend">[docs]</a>  <span class="k">def</span> <span class="nf">legend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">marks</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">rect</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">corner</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">gutter</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{},</span> <span class="n">label_style</span><span class="o">=</span><span class="p">{},</span> <span class="nb">id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Add a legend to the axes.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    marks : sequence of marks to add to the legend</span>
<span class="sd">      Each mark to be displayed in the legend should be specified using either</span>
<span class="sd">      a (label, mark) tuple or a (label, mark, style) tuple.  Each label should</span>
<span class="sd">      be the human-readable text to be displayed next to the mark.  The mark</span>
<span class="sd">      can be a string value &quot;line&quot; or &quot;rect&quot;, a marker string &quot;o&quot;, &quot;s&quot;, &quot;^&quot;,</span>
<span class="sd">      or an actual intance of :class:`toyplot.Mark`.</span>
<span class="sd">    bounds : (xmin, xmax, ymin, ymax) tuple, optional</span>
<span class="sd">      Use the bounds property to position / size the legend by specifying the</span>
<span class="sd">      position of each of its boundaries.  The boundaries may be specified in</span>
<span class="sd">      absolute drawing units, or as a percentage of the axes width / height</span>
<span class="sd">      using strings that end with &quot;%&quot;.</span>
<span class="sd">    rect : (x, y, width, height) tuple, optional</span>
<span class="sd">      Use the rect property to position / size the legend by specifying its</span>
<span class="sd">      upper-left-hand corner, width, and height.  Each parameter may be specified</span>
<span class="sd">      in absolute drawing units, or as a percentage of the axes width / height</span>
<span class="sd">      using strings that end with &quot;%&quot;.</span>
<span class="sd">    corner : (corner, width, height, inset) tuple, optional</span>
<span class="sd">      Use the corner property to position / size the legend by specifying its</span>
<span class="sd">      width and height, plus an inset from a corner of the axes.  Allowed</span>
<span class="sd">      corner values are &quot;top-left&quot;, &quot;top&quot;, &quot;top-right&quot;, &quot;right&quot;,</span>
<span class="sd">      &quot;bottom-right&quot;, &quot;bottom&quot;, &quot;bottom-left&quot;, and &quot;left&quot;.  The width and</span>
<span class="sd">      height may be specified in absolute drawing units, or as a percentage of</span>
<span class="sd">      the axes width / height using strings that end with &quot;%&quot;.  The inset is</span>
<span class="sd">      specified in absolute drawing units.</span>
<span class="sd">    grid : (rows, columns, index) tuple, or (rows, columns, i, j) tuple, or (rows, columns, i, rowspan, j, columnspan) tuple, optional</span>
<span class="sd">      Use the grid property to position / size the legend using a collection of</span>
<span class="sd">      grid cells filling the axes.  Specify the number of rows and columns in</span>
<span class="sd">      the grid, then specify either a zero-based cell index (which runs in</span>
<span class="sd">      left-ot-right, top-to-bottom order), a pair of i, j cell coordinates, or</span>
<span class="sd">      a set of i, column-span, j, row-span coordinates so the legend can cover</span>
<span class="sd">      more than one cell.</span>
<span class="sd">    gutter : size of the gutter around grid cells, optional</span>
<span class="sd">      Specifies the amount of empty space to leave between grid cells When using the</span>
<span class="sd">      `grid` parameter to position the legend.</span>
<span class="sd">    style : dict, optional</span>
<span class="sd">    id : string, optional</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    legend : :class:`toyplot.LegendMark`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">gutter</span> <span class="o">=</span> <span class="n">_require_scalar</span><span class="p">(</span><span class="n">gutter</span><span class="p">)</span>
    <span class="n">style</span> <span class="o">=</span> <span class="n">_require_style</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">_require_optional_id</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>

    <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">_region</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xmin_range</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xmax_range</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ymin_range</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ymax_range</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span> <span class="n">rect</span><span class="o">=</span><span class="n">rect</span><span class="p">,</span> <span class="n">corner</span><span class="o">=</span><span class="n">corner</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">,</span> <span class="n">gutter</span><span class="o">=</span><span class="n">gutter</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">LegendMark</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">marks</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="n">label_style</span><span class="p">,</span> <span class="nb">id</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Axes2D.rect"><a class="viewcode-back" href="../toyplot.html#toyplot.Axes2D.rect">[docs]</a>  <span class="k">def</span> <span class="nf">rect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{},</span> <span class="nb">id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">x1</span> <span class="o">=</span> <span class="n">_require_scalar</span><span class="p">(</span><span class="n">x1</span><span class="p">)</span>
    <span class="n">x2</span> <span class="o">=</span> <span class="n">_require_scalar</span><span class="p">(</span><span class="n">x2</span><span class="p">)</span>
    <span class="n">y1</span> <span class="o">=</span> <span class="n">_require_scalar</span><span class="p">(</span><span class="n">y1</span><span class="p">)</span>
    <span class="n">y2</span> <span class="o">=</span> <span class="n">_require_scalar</span><span class="p">(</span><span class="n">y2</span><span class="p">)</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">_require_optional_string</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="n">style</span> <span class="o">=</span> <span class="n">_require_style</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">_require_optional_id</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_update_domain</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">RectMark</span><span class="p">(</span><span class="n">x1</span><span class="o">=</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="o">=</span><span class="n">x2</span><span class="p">,</span> <span class="n">y1</span><span class="o">=</span><span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="o">=</span><span class="n">y2</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Axes2D.text"><a class="viewcode-back" href="../toyplot.html#toyplot.Axes2D.text">[docs]</a>  <span class="k">def</span> <span class="nf">text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{},</span> <span class="nb">id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Add text to the axes.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    x, y : float</span>
<span class="sd">      Coordinates of the text anchor.</span>
<span class="sd">    text : string</span>
<span class="sd">      The text to be displayed.</span>
<span class="sd">    title : string, optional</span>
<span class="sd">      Human-readable title for the mark.  The SVG / HTML backends render the</span>
<span class="sd">      title as a tooltip.</span>
<span class="sd">    style : dict, optional</span>
<span class="sd">      Collection of CSS styles to apply to the mark.  See</span>
<span class="sd">      :class:`toyplot.TextMark` for a list of useful styles.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    text : :class:`toyplot.TextMark`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">_require_scalar</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">_require_scalar</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">_require_string</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">_require_optional_string</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="n">style</span> <span class="o">=</span> <span class="n">_require_style</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">_require_optional_id</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_update_domain</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TextMark</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="nb">id</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Axes2D.vlines"><a class="viewcode-back" href="../toyplot.html#toyplot.Axes2D.vlines">[docs]</a>  <span class="k">def</span> <span class="nf">vlines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{},</span> <span class="nb">id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Add vertical line(s) to the axes.</span>

<span class="sd">    Vertical lines are convenient because they&#39;re guaranteed to fill the axes from</span>
<span class="sd">    top to bottom regardless of the axes size.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    x : array-like set of X coordinates</span>
<span class="sd">      One vertical line will be drawn through each X coordinate provided.</span>
<span class="sd">    title : string, optional</span>
<span class="sd">      Human-readable title for the mark.  The SVG / HTML backends render the</span>
<span class="sd">      title as a tooltip.</span>
<span class="sd">    style : dict, optional</span>
<span class="sd">      Collection of CSS styles to apply to the mark.  See</span>
<span class="sd">      :class:`toyplot.VLinesMark` for a list of useful styles.</span>
<span class="sd">    id : string, optional</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    vlines : :class:`toyplot.VLinesMark`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">_require_scalar_vector</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">_require_optional_string</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="n">style</span> <span class="o">=</span> <span class="n">_require_style</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">_require_optional_id</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_update_domain</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">x</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">VLinesMark</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="nb">id</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

<span class="c">###############################################################################################</span>
<span class="c"># Animation</span>
</div></div>
<div class="viewcode-block" id="AnimationFrame"><a class="viewcode-back" href="../toyplot.html#toyplot.AnimationFrame">[docs]</a><span class="k">class</span> <span class="nc">AnimationFrame</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Used to specify modifications to a `toyplot.Canvas` during animation.</span>

<span class="sd">  Do not create AnimationFrame instances yourself, an instance of</span>
<span class="sd">  AnimationFrame is automatically created by :meth:`toyplot.Canvas.animate`</span>
<span class="sd">  or :meth:`toyplot.Canvas.time` and passed to your callback.</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">begin</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">changes</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_index</span> <span class="o">=</span> <span class="n">index</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_begin</span> <span class="o">=</span> <span class="n">begin</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_end</span> <span class="o">=</span> <span class="n">end</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_changes</span> <span class="o">=</span> <span class="n">changes</span>

    <span class="c"># Pre-initialize storage for this frame</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_changes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_begin</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_changes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_end</span><span class="p">]</span>

  <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="s">&quot;&lt;toyplot.AnimationFrame </span><span class="si">%s</span><span class="s"> </span><span class="si">%.2f</span><span class="s"> </span><span class="si">%.2f</span><span class="s">&gt;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_begin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_end</span><span class="p">)</span>

<div class="viewcode-block" id="AnimationFrame.index"><a class="viewcode-back" href="../toyplot.html#toyplot.AnimationFrame.index">[docs]</a>  <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the current animation frame index.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_index</span>
</div>
<div class="viewcode-block" id="AnimationFrame.time"><a class="viewcode-back" href="../toyplot.html#toyplot.AnimationFrame.time">[docs]</a>  <span class="k">def</span> <span class="nf">time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the current animation time, in seconds.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_begin</span>
</div>
<div class="viewcode-block" id="AnimationFrame.duration"><a class="viewcode-back" href="../toyplot.html#toyplot.AnimationFrame.duration">[docs]</a>  <span class="k">def</span> <span class="nf">duration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the duration of the current animation frame, in seconds.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_end</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_begin</span>
</div>
<div class="viewcode-block" id="AnimationFrame.set_mark_style"><a class="viewcode-back" href="../toyplot.html#toyplot.AnimationFrame.set_mark_style">[docs]</a>  <span class="k">def</span> <span class="nf">set_mark_style</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mark</span><span class="p">,</span> <span class="n">style</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Change the style of a mark.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    mark : :class:`toyplot.Mark` instance</span>
<span class="sd">    style : dict containing CSS style information</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mark</span><span class="p">,</span> <span class="n">Mark</span><span class="p">):</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Mark style can only be set on toyplot.Mark instances.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_changes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_begin</span><span class="p">][</span><span class="s">&quot;set-mark-style&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">mark</span><span class="p">,</span> <span class="n">style</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="AnimationFrame.set_datum_style"><a class="viewcode-back" href="../toyplot.html#toyplot.AnimationFrame.set_datum_style">[docs]</a>  <span class="k">def</span> <span class="nf">set_datum_style</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mark</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">style</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Change the style of one datum in a :class:`toyplot.Mark` at the current frame.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    mark : :class:`toyplot.Mark` instance</span>
<span class="sd">    index : zero-based index of the datum to modify</span>
<span class="sd">    style : dict containing CSS style information</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mark</span><span class="p">,</span> <span class="p">(</span><span class="n">BarMagnitudesMark</span><span class="p">,</span> <span class="n">HLinesMark</span><span class="p">,</span> <span class="n">VLinesMark</span><span class="p">)):</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Cannot set datum style for </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="nb">type</span><span class="p">(</span><span class="n">mark</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_changes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_begin</span><span class="p">][</span><span class="s">&quot;set-datum-style&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">mark</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">style</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="AnimationFrame.set_mark_text"><a class="viewcode-back" href="../toyplot.html#toyplot.AnimationFrame.set_mark_text">[docs]</a>  <span class="k">def</span> <span class="nf">set_mark_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mark</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Change the text in a :class:`toyplot.TextMark` at the current frame.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    mark : :class:`toyplot.TextMark` instance</span>
<span class="sd">    value : string</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mark</span><span class="p">,</span> <span class="n">TextMark</span><span class="p">):</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Mark text can only be set for toyplot.TextMark instances.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_changes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_begin</span><span class="p">][</span><span class="s">&quot;set-mark-text&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">mark</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>

<span class="c">###############################################################################################</span>
<span class="c"># Canvas</span>
</div></div>
<div class="viewcode-block" id="Canvas"><a class="viewcode-back" href="../toyplot.html#toyplot.Canvas">[docs]</a><span class="k">class</span> <span class="nc">Canvas</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Top-level container for Toyplot drawings.</span>

<span class="sd">  Parameters</span>
<span class="sd">  ----------</span>
<span class="sd">  width : integer, optional</span>
<span class="sd">    Width of the canvas in drawing units.</span>
<span class="sd">  height : integer, optional</span>
<span class="sd">    Height of the canvas in drawing units.</span>
<span class="sd">  style : dict, optional</span>
<span class="sd">    Collection of CSS styles to apply to the canvas.</span>
<span class="sd">  autorender : string or `False`, optional</span>
<span class="sd">    Specify the name of a backend to use for autorendering or `False` to</span>
<span class="sd">    disable.  Valid backend names are &quot;html&quot;, &quot;png&quot;, or &quot;svg&quot;.</span>

<span class="sd">  Examples</span>
<span class="sd">  --------</span>

<span class="sd">  The following would create a Canvas 800 units wide, 600 units tall, with a yellow background:</span>

<span class="sd">  &gt;&gt;&gt; canvas = toyplot.Canvas(800, 600, style={&quot;background-color&quot;:&quot;yellow&quot;})</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{},</span> <span class="nb">id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">autorender</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_width</span> <span class="o">=</span> <span class="n">width</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_height</span> <span class="o">=</span> <span class="n">height</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_style</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;background-color&quot;</span> <span class="p">:</span> <span class="s">&quot;transparent&quot;</span><span class="p">,</span> <span class="s">&quot;fill&quot;</span> <span class="p">:</span> <span class="s">&quot;#343434&quot;</span><span class="p">,</span> <span class="s">&quot;fill-opacity&quot;</span> <span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s">&quot;font-family&quot;</span><span class="p">:</span><span class="s">&quot;helvetica&quot;</span><span class="p">,</span> <span class="s">&quot;font-size&quot;</span> <span class="p">:</span> <span class="s">&quot;12px&quot;</span><span class="p">,</span> <span class="s">&quot;opacity&quot;</span> <span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s">&quot;stroke&quot;</span> <span class="p">:</span> <span class="s">&quot;#343434&quot;</span><span class="p">,</span> <span class="s">&quot;stroke-opacity&quot;</span> <span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s">&quot;stroke-width&quot;</span> <span class="p">:</span> <span class="mf">1.0</span><span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="o">=</span> <span class="nb">id</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_animation</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">defaultdict</span><span class="p">(</span><span class="k">lambda</span> <span class="p">:</span> <span class="n">collections</span><span class="o">.</span><span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_children</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">autorender</span><span class="p">(</span><span class="n">toyplot</span><span class="o">.</span><span class="n">autorender</span> <span class="k">if</span> <span class="n">autorender</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">autorender</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">_repr_html_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autorender_method</span> <span class="o">==</span> <span class="s">&quot;html&quot;</span><span class="p">:</span>
      <span class="kn">import</span> <span class="nn">toyplot.html</span>
      <span class="kn">import</span> <span class="nn">xml.etree.ElementTree</span> <span class="kn">as</span> <span class="nn">xml</span>
      <span class="k">return</span> <span class="n">xml</span><span class="o">.</span><span class="n">tostring</span><span class="p">(</span><span class="n">toyplot</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="n">method</span><span class="o">=</span><span class="s">&quot;html&quot;</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">_repr_png_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autorender_method</span> <span class="o">==</span> <span class="s">&quot;png&quot;</span><span class="p">:</span>
      <span class="kn">import</span> <span class="nn">toyplot.png</span>
      <span class="k">return</span> <span class="n">toyplot</span><span class="o">.</span><span class="n">png</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">_repr_svg_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autorender_method</span> <span class="o">==</span> <span class="s">&quot;svg&quot;</span><span class="p">:</span>
      <span class="kn">import</span> <span class="nn">toyplot.svg</span>
      <span class="kn">import</span> <span class="nn">xml.etree.ElementTree</span> <span class="kn">as</span> <span class="nn">xml</span>
      <span class="k">return</span> <span class="n">xml</span><span class="o">.</span><span class="n">tostring</span><span class="p">(</span><span class="n">toyplot</span><span class="o">.</span><span class="n">svg</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="n">method</span><span class="o">=</span><span class="s">&quot;xml&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="Canvas.animate"><a class="viewcode-back" href="../toyplot.html#toyplot.Canvas.animate">[docs]</a>  <span class="k">def</span> <span class="nf">animate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frames</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generate a collection of animation frames, calling a callback to store an explicit representation of what changes at each frame.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    frames : integer, tuple, or sequence</span>
<span class="sd">      Pass a sequence of values that specify the time (in seconds) of the</span>
<span class="sd">      beginning / end of each frame.  Note that the number of frames will be the</span>
<span class="sd">      length of the sequence minus one.  Alternatively, you can pass a 2-tuple</span>
<span class="sd">      containing the number of frames and the frame rate in frames-per-second.</span>
<span class="sd">      Finally, you may simply specify the number of frames, in which case the</span>
<span class="sd">      rate will default to 30 frames-per-second.</span>
<span class="sd">    callback : function</span>
<span class="sd">      The callback function will be called once per frame, and will receive an</span>
<span class="sd">      instance of :class:`toyplot.AnimationFrame` as its sole argument.  The</span>
<span class="sd">      callback function can access the frame number, time, and duration from the</span>
<span class="sd">      state object, and should use the other methods provided by the state object</span>
<span class="sd">      to make changes to the canvas.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">frames</span><span class="p">,</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Integral</span><span class="p">):</span>
      <span class="n">frames</span> <span class="o">=</span> <span class="p">(</span><span class="n">frames</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">frames</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
      <span class="n">frame_count</span><span class="p">,</span> <span class="n">frame_rate</span> <span class="o">=</span> <span class="n">frames</span>
      <span class="n">frames</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">frame_count</span> <span class="o">/</span> <span class="n">frame_rate</span><span class="p">,</span> <span class="n">frame_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
      <span class="n">frame</span> <span class="o">=</span> <span class="n">AnimationFrame</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">frames</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="n">frames</span><span class="p">[</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_animation</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">callback</span><span class="p">:</span>
        <span class="n">callback</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>

    <span class="c"># Record the end-time of the last frame, so backends can calculate frame durations.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_animation</span><span class="p">[</span><span class="n">frames</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
</div>
<div class="viewcode-block" id="Canvas.autorender"><a class="viewcode-back" href="../toyplot.html#toyplot.Canvas.autorender">[docs]</a>  <span class="k">def</span> <span class="nf">autorender</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Enable / disable canvas autorendering.</span>

<span class="sd">    Autorendering - which is enabled by default when a canvas is created -</span>
<span class="sd">    controls how the canvas should be displayed automatically without</span>
<span class="sd">    caller intervention in certain interactive environments, such as IPython</span>
<span class="sd">    notebooks.</span>

<span class="sd">    Note that autorendering is disabled when a canvas is explicitly</span>
<span class="sd">    shown using any of the rendering backends.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    method : string or `False`</span>
<span class="sd">      Specify the name of a backend to use for autorendering or `False` to</span>
<span class="sd">      disable.  Valid backend names are &quot;html&quot;, &quot;png&quot;, or &quot;svg&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_autorender_method</span> <span class="o">=</span> <span class="n">method</span>
    <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
      <span class="k">if</span> <span class="bp">self</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">Canvas</span><span class="o">.</span><span class="n">_autorender_list</span><span class="p">:</span>
        <span class="n">Canvas</span><span class="o">.</span><span class="n">_autorender_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">if</span> <span class="bp">self</span> <span class="ow">in</span> <span class="n">Canvas</span><span class="o">.</span><span class="n">_autorender_list</span><span class="p">:</span>
        <span class="n">Canvas</span><span class="o">.</span><span class="n">_autorender_list</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Canvas.axes"><a class="viewcode-back" href="../toyplot.html#toyplot.Canvas.axes">[docs]</a>  <span class="k">def</span> <span class="nf">axes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">rect</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">corner</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">gutter</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">xshow</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">yshow</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">tick_length</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">xlabel</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">xscale</span><span class="o">=</span><span class="s">&quot;linear&quot;</span><span class="p">,</span> <span class="n">yscale</span><span class="o">=</span><span class="s">&quot;linear&quot;</span><span class="p">,</span> <span class="n">xmin</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ymin</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ymax</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">xticklocator</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">yticklocator</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Add a set of 2D axes to the canvas.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    xlabel : string, optional</span>
<span class="sd">      Human-readable label for the X axis.</span>
<span class="sd">    ylabel : string, optional</span>
<span class="sd">      Human-readable label for the Y axis.</span>
<span class="sd">    xmin, xmax, ymin, ymax : float, optional</span>
<span class="sd">      Used to explicitly override the axis domain (normally, the domain is</span>
<span class="sd">      implicitly defined by any marks added to the axes).</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    axes : :class:`toyplot.Axes2D`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">xmin_range</span><span class="p">,</span> <span class="n">xmax_range</span><span class="p">,</span> <span class="n">ymin_range</span><span class="p">,</span> <span class="n">ymax_range</span> <span class="o">=</span> <span class="n">_region</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_width</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_height</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span> <span class="n">rect</span><span class="o">=</span><span class="n">rect</span><span class="p">,</span> <span class="n">corner</span><span class="o">=</span><span class="n">corner</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">,</span> <span class="n">gutter</span><span class="o">=</span><span class="n">gutter</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Axes2D</span><span class="p">(</span><span class="n">xmin_range</span><span class="p">,</span> <span class="n">xmax_range</span><span class="p">,</span> <span class="n">ymin_range</span><span class="p">,</span> <span class="n">ymax_range</span><span class="p">,</span> <span class="n">xmin</span><span class="o">=</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="o">=</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="o">=</span><span class="n">ymax</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="n">show</span><span class="p">,</span> <span class="n">xshow</span><span class="o">=</span><span class="n">xshow</span><span class="p">,</span> <span class="n">yshow</span><span class="o">=</span><span class="n">yshow</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">xlabel</span><span class="o">=</span><span class="n">xlabel</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="n">ylabel</span><span class="p">,</span> <span class="n">xticklocator</span><span class="o">=</span><span class="n">xticklocator</span><span class="p">,</span> <span class="n">yticklocator</span><span class="o">=</span><span class="n">yticklocator</span><span class="p">,</span> <span class="n">xscale</span><span class="o">=</span><span class="n">xscale</span><span class="p">,</span> <span class="n">yscale</span><span class="o">=</span><span class="n">yscale</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">palette</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="n">padding</span><span class="p">,</span> <span class="n">tick_length</span><span class="o">=</span><span class="n">tick_length</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Canvas.legend"><a class="viewcode-back" href="../toyplot.html#toyplot.Canvas.legend">[docs]</a>  <span class="k">def</span> <span class="nf">legend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">marks</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">rect</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">corner</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">gutter</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{},</span> <span class="n">label_style</span><span class="o">=</span><span class="p">{},</span> <span class="nb">id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Add a legend to the canvas.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    marks : sequence of marks to add to the legend</span>
<span class="sd">      Each mark to be displayed in the legend should be specified using either</span>
<span class="sd">      a (label, mark) tuple or a (label, mark, style) tuple.  Each label should</span>
<span class="sd">      be the human-readable text to be displayed next to the mark.  The mark</span>
<span class="sd">      can be a string value &quot;line&quot; or &quot;rect&quot;, a marker string &quot;o&quot;, &quot;s&quot;, &quot;^&quot;,</span>
<span class="sd">      or an actual intance of :class:`toyplot.Mark`.</span>
<span class="sd">    bounds : (xmin, xmax, ymin, ymax) tuple, optional</span>
<span class="sd">      Use the bounds property to position / size the legend by specifying the</span>
<span class="sd">      position of each of its boundaries.  The boundaries may be specified in</span>
<span class="sd">      absolute drawing units, or as a percentage of the canvas width / height</span>
<span class="sd">      using strings that end with &quot;%&quot;.</span>
<span class="sd">    rect : (x, y, width, height) tuple, optional</span>
<span class="sd">      Use the rect property to position / size the legend by specifying its</span>
<span class="sd">      upper-left-hand corner, width, and height.  Each parameter may be specified</span>
<span class="sd">      in absolute drawing units, or as a percentage of the canvas width / height</span>
<span class="sd">      using strings that end with &quot;%&quot;.</span>
<span class="sd">    corner : (corner, width, height, inset) tuple, optional</span>
<span class="sd">      Use the corner property to position / size the legend by specifying its</span>
<span class="sd">      width and height, plus an inset from a corner of the canvas.  Allowed</span>
<span class="sd">      corner values are &quot;top-left&quot;, &quot;top&quot;, &quot;top-right&quot;, &quot;right&quot;,</span>
<span class="sd">      &quot;bottom-right&quot;, &quot;bottom&quot;, &quot;bottom-left&quot;, and &quot;left&quot;.  The width and</span>
<span class="sd">      height may be specified in absolute drawing units, or as a percentage of</span>
<span class="sd">      the canvas width / height using strings that end with &quot;%&quot;.  The inset is</span>
<span class="sd">      specified in absolute drawing units.</span>
<span class="sd">    grid : (rows, columns, index) tuple, or (rows, columns, i, j) tuple, or (rows, columns, i, rowspan, j, columnspan) tuple, optional</span>
<span class="sd">      Use the grid property to position / size the legend using a collection of</span>
<span class="sd">      grid cells filling the canvas.  Specify the number of rows and columns in</span>
<span class="sd">      the grid, then specify either a zero-based cell index (which runs in</span>
<span class="sd">      left-ot-right, top-to-bottom order), a pair of i, j cell coordinates, or</span>
<span class="sd">      a set of i, column-span, j, row-span coordinates so the legend can cover</span>
<span class="sd">      more than one cell.</span>
<span class="sd">    gutter : size of the gutter around grid cells, optional</span>
<span class="sd">      Specifies the amount of empty space to leave between grid cells When using the</span>
<span class="sd">      `grid` parameter to position the legend.</span>
<span class="sd">    style : dict, optional</span>
<span class="sd">    id : string, optional</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    legend : :class:`toyplot.LegendMark`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">gutter</span> <span class="o">=</span> <span class="n">_require_scalar</span><span class="p">(</span><span class="n">gutter</span><span class="p">)</span>
    <span class="n">style</span> <span class="o">=</span> <span class="n">_require_style</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">_require_optional_id</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>

    <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">_region</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_width</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_height</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span> <span class="n">rect</span><span class="o">=</span><span class="n">rect</span><span class="p">,</span> <span class="n">corner</span><span class="o">=</span><span class="n">corner</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">,</span> <span class="n">gutter</span><span class="o">=</span><span class="n">gutter</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">LegendMark</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">marks</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="n">label_style</span><span class="p">,</span> <span class="nb">id</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Canvas.rect"><a class="viewcode-back" href="../toyplot.html#toyplot.Canvas.rect">[docs]</a>  <span class="k">def</span> <span class="nf">rect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">rect</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">corner</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">gutter</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{},</span> <span class="nb">id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Add a rectangle to the canvas.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    title : string, optional</span>
<span class="sd">      Human-readable title for the mark.  The SVG / HTML backends render the</span>
<span class="sd">      title as a tooltip.</span>
<span class="sd">    style : dict, optional</span>
<span class="sd">      Collection of CSS styles to apply to the mark.  See</span>
<span class="sd">      :class:`toyplot.RectMark` for a list of useful styles.</span>
<span class="sd">    id : string, optional</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    rect : :class:`toyplot.RectMark`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">gutter</span> <span class="o">=</span> <span class="n">_require_scalar</span><span class="p">(</span><span class="n">gutter</span><span class="p">)</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">_require_optional_string</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="n">style</span> <span class="o">=</span> <span class="n">_require_style</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">_require_optional_id</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>

    <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">_region</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_width</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_height</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span> <span class="n">rect</span><span class="o">=</span><span class="n">rect</span><span class="p">,</span> <span class="n">corner</span><span class="o">=</span><span class="n">corner</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">,</span> <span class="n">gutter</span><span class="o">=</span><span class="n">gutter</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">RectMark</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="nb">id</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Canvas.text"><a class="viewcode-back" href="../toyplot.html#toyplot.Canvas.text">[docs]</a>  <span class="k">def</span> <span class="nf">text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{},</span> <span class="nb">id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Add text to the canvas.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    x, y : float</span>
<span class="sd">      Coordinates of the text anchor in canvas drawing units.  Note that canvas</span>
<span class="sd">      Y coordinates increase from top-to-bottom.</span>
<span class="sd">    text : string</span>
<span class="sd">      The text to be displayed.</span>
<span class="sd">    title : string, optional</span>
<span class="sd">      Human-readable title for the mark.  The SVG / HTML backends render the</span>
<span class="sd">      title as a tooltip.</span>
<span class="sd">    style : dict, optional</span>
<span class="sd">      Collection of CSS styles to apply to the mark.  See</span>
<span class="sd">      :class:`toyplot.TextMark` for a list of useful styles.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    text : :class:`toyplot.TextMark`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">_require_scalar</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">_require_scalar</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">_require_string</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">_require_optional_string</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="n">style</span> <span class="o">=</span> <span class="n">_require_style</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">_require_optional_id</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TextMark</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="nb">id</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Canvas.time"><a class="viewcode-back" href="../toyplot.html#toyplot.Canvas.time">[docs]</a>  <span class="k">def</span> <span class="nf">time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">begin</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return a :class:`toyplot.AnimationFrame` with the given start and end time, ready to store animated canvas modifications.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    begin : scalar</span>
<span class="sd">      Specify the frame start time (in seconds).</span>
<span class="sd">    end : scalar</span>
<span class="sd">      Specify the frame end time (in seconds).</span>
<span class="sd">    index : integer, optional</span>
<span class="sd">      Specify an index for this frame.  Note that the index is simply a</span>
<span class="sd">      convenience for code that depends on accessing the index from the</span>
<span class="sd">      result AnimationFrame.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    frame : :class:`toyplot.AnimationFrame` instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">index</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">return</span> <span class="n">AnimationFrame</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">begin</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_animation</span><span class="p">)</span>
</div>
  <span class="nd">@staticmethod</span>
  <span class="k">def</span> <span class="nf">_ipython_post_execute</span><span class="p">():</span> <span class="c"># pragma: no cover</span>
    <span class="k">try</span><span class="p">:</span>
      <span class="kn">import</span> <span class="nn">IPython.display</span>
      <span class="k">for</span> <span class="n">canvas</span> <span class="ow">in</span> <span class="p">[</span><span class="n">canvas</span> <span class="k">for</span> <span class="n">canvas</span> <span class="ow">in</span> <span class="n">Canvas</span><span class="o">.</span><span class="n">_autorender_list</span><span class="p">]:</span>
        <span class="n">IPython</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">canvas</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
      <span class="k">pass</span>

  <span class="nd">@staticmethod</span>
  <span class="k">def</span> <span class="nf">_ipython_register</span><span class="p">():</span> <span class="c"># pragma: no cover</span>
    <span class="k">try</span><span class="p">:</span>
      <span class="kn">import</span> <span class="nn">IPython</span>
      <span class="k">if</span> <span class="n">IPython</span><span class="o">.</span><span class="n">get_ipython</span><span class="p">():</span>
        <span class="n">IPython</span><span class="o">.</span><span class="n">get_ipython</span><span class="p">()</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s">&quot;post_execute&quot;</span><span class="p">,</span> <span class="n">Canvas</span><span class="o">.</span><span class="n">_ipython_post_execute</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
      <span class="k">pass</span>
</div>
<span class="n">Canvas</span><span class="o">.</span><span class="n">_autorender_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">Canvas</span><span class="o">.</span><span class="n">_ipython_register</span><span class="p">()</span>
<span class="n">toyplot</span><span class="o">.</span><span class="n">autorender</span> <span class="o">=</span> <span class="s">&quot;html&quot;</span>
</pre></div>

          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Sandia Corporation. Under the terms of Contract
DE-AC04-94AL85000 with Sandia Corporation, the U.S. Government retains certain
rights in this software.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>